(function(){function t(t){function e(e,i,n,r,s,o){for(;s>=0&&o>s;s+=t){var a=r?r[s]:s;n=i(n,e[a],a,e)}return n}return function(i,n,r,s){n=y(n,s,4);var o=!S(i)&&m.keys(i),a=(o||i).length,h=t>0?0:a-1;return arguments.length<3&&(r=i[o?o[h]:h],h+=t),e(i,n,r,o,h,a)}}function e(t){return function(e,i,n){i=x(i,n);for(var r=null!=e&&e.length,s=t>0?0:r-1;s>=0&&r>s;s+=t)if(i(e[s],s,e))return s;return-1}}function i(t,e){var i=z.length,n=t.constructor,r=m.isFunction(n)&&n.prototype||o,s="constructor";for(m.has(t,s)&&!m.contains(e,s)&&e.push(s);i--;)s=z[i],s in t&&t[s]!==r[s]&&!m.contains(e,s)&&e.push(s)}var n=this,r=n._,s=Array.prototype,o=Object.prototype,a=Function.prototype,h=s.push,l=s.slice,u=o.toString,c=o.hasOwnProperty,p=Array.isArray,d=Object.keys,f=a.bind,v=Object.create,g=function(){},m=function(t){return t instanceof m?t:this instanceof m?void(this._wrapped=t):new m(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):n._=m,m.VERSION="1.8.2";var y=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)};case 4:return function(i,n,r,s){return t.call(e,i,n,r,s)}}return function(){return t.apply(e,arguments)}},x=function(t,e,i){return null==t?m.identity:m.isFunction(t)?y(t,e,i):m.isObject(t)?m.matcher(t):m.property(t)};m.iteratee=function(t,e){return x(t,e,1/0)};var b=function(t,e){return function(i){var n=arguments.length;if(2>n||null==i)return i;for(var r=1;n>r;r++)for(var s=arguments[r],o=t(s),a=o.length,h=0;a>h;h++){var l=o[h];e&&void 0!==i[l]||(i[l]=s[l])}return i}},E=function(t){if(!m.isObject(t))return{};if(v)return v(t);g.prototype=t;var e=new g;return g.prototype=null,e},w=Math.pow(2,53)-1,S=function(t){var e=t&&t.length;return"number"==typeof e&&e>=0&&w>=e};m.each=m.forEach=function(t,e,i){e=y(e,i);var n,r;if(S(t))for(n=0,r=t.length;r>n;n++)e(t[n],n,t);else{var s=m.keys(t);for(n=0,r=s.length;r>n;n++)e(t[s[n]],s[n],t)}return t},m.map=m.collect=function(t,e,i){e=x(e,i);for(var n=!S(t)&&m.keys(t),r=(n||t).length,s=Array(r),o=0;r>o;o++){var a=n?n[o]:o;s[o]=e(t[a],a,t)}return s},m.reduce=m.foldl=m.inject=t(1),m.reduceRight=m.foldr=t(-1),m.find=m.detect=function(t,e,i){var n;return n=S(t)?m.findIndex(t,e,i):m.findKey(t,e,i),void 0!==n&&-1!==n?t[n]:void 0},m.filter=m.select=function(t,e,i){var n=[];return e=x(e,i),m.each(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n},m.reject=function(t,e,i){return m.filter(t,m.negate(x(e)),i)},m.every=m.all=function(t,e,i){e=x(e,i);for(var n=!S(t)&&m.keys(t),r=(n||t).length,s=0;r>s;s++){var o=n?n[s]:s;if(!e(t[o],o,t))return!1}return!0},m.some=m.any=function(t,e,i){e=x(e,i);for(var n=!S(t)&&m.keys(t),r=(n||t).length,s=0;r>s;s++){var o=n?n[s]:s;if(e(t[o],o,t))return!0}return!1},m.contains=m.includes=m.include=function(t,e,i){return S(t)||(t=m.values(t)),m.indexOf(t,e,"number"==typeof i&&i)>=0},m.invoke=function(t,e){var i=l.call(arguments,2),n=m.isFunction(e);return m.map(t,function(t){var r=n?e:t[e];return null==r?r:r.apply(t,i)})},m.pluck=function(t,e){return m.map(t,m.property(e))},m.where=function(t,e){return m.filter(t,m.matcher(e))},m.findWhere=function(t,e){return m.find(t,m.matcher(e))},m.max=function(t,e,i){var n,r,s=-1/0,o=-1/0;if(null==e&&null!=t){t=S(t)?t:m.values(t);for(var a=0,h=t.length;h>a;a++)n=t[a],n>s&&(s=n)}else e=x(e,i),m.each(t,function(t,i,n){r=e(t,i,n),(r>o||r===-1/0&&s===-1/0)&&(s=t,o=r)});return s},m.min=function(t,e,i){var n,r,s=1/0,o=1/0;if(null==e&&null!=t){t=S(t)?t:m.values(t);for(var a=0,h=t.length;h>a;a++)n=t[a],s>n&&(s=n)}else e=x(e,i),m.each(t,function(t,i,n){r=e(t,i,n),(o>r||1/0===r&&1/0===s)&&(s=t,o=r)});return s},m.shuffle=function(t){for(var e,i=S(t)?t:m.values(t),n=i.length,r=Array(n),s=0;n>s;s++)e=m.random(0,s),e!==s&&(r[s]=r[e]),r[e]=i[s];return r},m.sample=function(t,e,i){return null==e||i?(S(t)||(t=m.values(t)),t[m.random(t.length-1)]):m.shuffle(t).slice(0,Math.max(0,e))},m.sortBy=function(t,e,i){return e=x(e,i),m.pluck(m.map(t,function(t,i,n){return{value:t,index:i,criteria:e(t,i,n)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index}),"value")};var T=function(t){return function(e,i,n){var r={};return i=x(i,n),m.each(e,function(n,s){var o=i(n,s,e);t(r,n,o)}),r}};m.groupBy=T(function(t,e,i){m.has(t,i)?t[i].push(e):t[i]=[e]}),m.indexBy=T(function(t,e,i){t[i]=e}),m.countBy=T(function(t,e,i){m.has(t,i)?t[i]++:t[i]=1}),m.toArray=function(t){return t?m.isArray(t)?l.call(t):S(t)?m.map(t,m.identity):m.values(t):[]},m.size=function(t){return null==t?0:S(t)?t.length:m.keys(t).length},m.partition=function(t,e,i){e=x(e,i);var n=[],r=[];return m.each(t,function(t,i,s){(e(t,i,s)?n:r).push(t)}),[n,r]},m.first=m.head=m.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:m.initial(t,t.length-e)},m.initial=function(t,e,i){return l.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},m.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:m.rest(t,Math.max(0,t.length-e))},m.rest=m.tail=m.drop=function(t,e,i){return l.call(t,null==e||i?1:e)},m.compact=function(t){return m.filter(t,m.identity)};var _=function(t,e,i,n){for(var r=[],s=0,o=n||0,a=t&&t.length;a>o;o++){var h=t[o];if(S(h)&&(m.isArray(h)||m.isArguments(h))){e||(h=_(h,e,i));var l=0,u=h.length;for(r.length+=u;u>l;)r[s++]=h[l++]}else i||(r[s++]=h)}return r};m.flatten=function(t,e){return _(t,e,!1)},m.without=function(t){return m.difference(t,l.call(arguments,1))},m.uniq=m.unique=function(t,e,i,n){if(null==t)return[];m.isBoolean(e)||(n=i,i=e,e=!1),null!=i&&(i=x(i,n));for(var r=[],s=[],o=0,a=t.length;a>o;o++){var h=t[o],l=i?i(h,o,t):h;e?(o&&s===l||r.push(h),s=l):i?m.contains(s,l)||(s.push(l),r.push(h)):m.contains(r,h)||r.push(h)}return r},m.union=function(){return m.uniq(_(arguments,!0,!0))},m.intersection=function(t){if(null==t)return[];for(var e=[],i=arguments.length,n=0,r=t.length;r>n;n++){var s=t[n];if(!m.contains(e,s)){for(var o=1;i>o&&m.contains(arguments[o],s);o++);o===i&&e.push(s)}}return e},m.difference=function(t){var e=_(arguments,!0,!0,1);return m.filter(t,function(t){return!m.contains(e,t)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(t){for(var e=t&&m.max(t,"length").length||0,i=Array(e),n=0;e>n;n++)i[n]=m.pluck(t,n);return i},m.object=function(t,e){for(var i={},n=0,r=t&&t.length;r>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},m.indexOf=function(t,e,i){var n=0,r=t&&t.length;if("number"==typeof i)n=0>i?Math.max(0,r+i):i;else if(i&&r)return n=m.sortedIndex(t,e),t[n]===e?n:-1;if(e!==e)return m.findIndex(l.call(t,n),m.isNaN);for(;r>n;n++)if(t[n]===e)return n;return-1},m.lastIndexOf=function(t,e,i){var n=t?t.length:0;if("number"==typeof i&&(n=0>i?n+i+1:Math.min(n,i+1)),e!==e)return m.findLastIndex(l.call(t,0,n),m.isNaN);for(;--n>=0;)if(t[n]===e)return n;return-1},m.findIndex=e(1),m.findLastIndex=e(-1),m.sortedIndex=function(t,e,i,n){i=x(i,n,1);for(var r=i(e),s=0,o=t.length;o>s;){var a=Math.floor((s+o)/2);i(t[a])<r?s=a+1:o=a}return s},m.range=function(t,e,i){arguments.length<=1&&(e=t||0,t=0),i=i||1;for(var n=Math.max(Math.ceil((e-t)/i),0),r=Array(n),s=0;n>s;s++,t+=i)r[s]=t;return r};var D=function(t,e,i,n,r){if(!(n instanceof e))return t.apply(i,r);var s=E(t.prototype),o=t.apply(s,r);return m.isObject(o)?o:s};m.bind=function(t,e){if(f&&t.bind===f)return f.apply(t,l.call(arguments,1));if(!m.isFunction(t))throw new TypeError("Bind must be called on a function");var i=l.call(arguments,2),n=function(){return D(t,n,e,this,i.concat(l.call(arguments)))};return n},m.partial=function(t){var e=l.call(arguments,1),i=function(){for(var n=0,r=e.length,s=Array(r),o=0;r>o;o++)s[o]=e[o]===m?arguments[n++]:e[o];for(;n<arguments.length;)s.push(arguments[n++]);return D(t,i,this,this,s)};return i},m.bindAll=function(t){var e,i,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(e=1;n>e;e++)i=arguments[e],t[i]=m.bind(t[i],t);return t},m.memoize=function(t,e){var i=function(n){var r=i.cache,s=""+(e?e.apply(this,arguments):n);return m.has(r,s)||(r[s]=t.apply(this,arguments)),r[s]};return i.cache={},i},m.delay=function(t,e){var i=l.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},m.defer=m.partial(m.delay,m,1),m.throttle=function(t,e,i){var n,r,s,o=null,a=0;i||(i={});var h=function(){a=i.leading===!1?0:m.now(),o=null,s=t.apply(n,r),o||(n=r=null)};return function(){var l=m.now();a||i.leading!==!1||(a=l);var u=e-(l-a);return n=this,r=arguments,0>=u||u>e?(o&&(clearTimeout(o),o=null),a=l,s=t.apply(n,r),o||(n=r=null)):o||i.trailing===!1||(o=setTimeout(h,u)),s}},m.debounce=function(t,e,i){var n,r,s,o,a,h=function(){var l=m.now()-o;e>l&&l>=0?n=setTimeout(h,e-l):(n=null,i||(a=t.apply(s,r),n||(s=r=null)))};return function(){s=this,r=arguments,o=m.now();var l=i&&!n;return n||(n=setTimeout(h,e)),l&&(a=t.apply(s,r),s=r=null),a}},m.wrap=function(t,e){return m.partial(e,t)},m.negate=function(t){return function(){return!t.apply(this,arguments)}},m.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},m.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},m.before=function(t,e){var i;return function(){return--t>0&&(i=e.apply(this,arguments)),1>=t&&(e=null),i}},m.once=m.partial(m.before,2);var C=!{toString:null}.propertyIsEnumerable("toString"),z=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];m.keys=function(t){if(!m.isObject(t))return[];if(d)return d(t);var e=[];for(var n in t)m.has(t,n)&&e.push(n);return C&&i(t,e),e},m.allKeys=function(t){if(!m.isObject(t))return[];var e=[];for(var n in t)e.push(n);return C&&i(t,e),e},m.values=function(t){for(var e=m.keys(t),i=e.length,n=Array(i),r=0;i>r;r++)n[r]=t[e[r]];return n},m.mapObject=function(t,e,i){e=x(e,i);for(var n,r=m.keys(t),s=r.length,o={},a=0;s>a;a++)n=r[a],o[n]=e(t[n],n,t);return o},m.pairs=function(t){for(var e=m.keys(t),i=e.length,n=Array(i),r=0;i>r;r++)n[r]=[e[r],t[e[r]]];return n},m.invert=function(t){for(var e={},i=m.keys(t),n=0,r=i.length;r>n;n++)e[t[i[n]]]=i[n];return e},m.functions=m.methods=function(t){var e=[];for(var i in t)m.isFunction(t[i])&&e.push(i);return e.sort()},m.extend=b(m.allKeys),m.extendOwn=m.assign=b(m.keys),m.findKey=function(t,e,i){e=x(e,i);for(var n,r=m.keys(t),s=0,o=r.length;o>s;s++)if(n=r[s],e(t[n],n,t))return n},m.pick=function(t,e,i){var n,r,s={},o=t;if(null==o)return s;m.isFunction(e)?(r=m.allKeys(o),n=y(e,i)):(r=_(arguments,!1,!1,1),n=function(t,e,i){return e in i},o=Object(o));for(var a=0,h=r.length;h>a;a++){var l=r[a],u=o[l];n(u,l,o)&&(s[l]=u)}return s},m.omit=function(t,e,i){if(m.isFunction(e))e=m.negate(e);else{var n=m.map(_(arguments,!1,!1,1),String);e=function(t,e){return!m.contains(n,e)}}return m.pick(t,e,i)},m.defaults=b(m.allKeys,!0),m.clone=function(t){return m.isObject(t)?m.isArray(t)?t.slice():m.extend({},t):t},m.tap=function(t,e){return e(t),t},m.isMatch=function(t,e){var i=m.keys(e),n=i.length;if(null==t)return!n;for(var r=Object(t),s=0;n>s;s++){var o=i[s];if(e[o]!==r[o]||!(o in r))return!1}return!0};var A=function(t,e,i,n){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof m&&(t=t._wrapped),e instanceof m&&(e=e._wrapped);var r=u.call(t);if(r!==u.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var s="[object Array]"===r;if(!s){if("object"!=typeof t||"object"!=typeof e)return!1;var o=t.constructor,a=e.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}i=i||[],n=n||[];for(var h=i.length;h--;)if(i[h]===t)return n[h]===e;if(i.push(t),n.push(e),s){if(h=t.length,h!==e.length)return!1;for(;h--;)if(!A(t[h],e[h],i,n))return!1}else{var l,c=m.keys(t);if(h=c.length,m.keys(e).length!==h)return!1;for(;h--;)if(l=c[h],!m.has(e,l)||!A(t[l],e[l],i,n))return!1}return i.pop(),n.pop(),!0};m.isEqual=function(t,e){return A(t,e)},m.isEmpty=function(t){return null==t?!0:S(t)&&(m.isArray(t)||m.isString(t)||m.isArguments(t))?0===t.length:0===m.keys(t).length},m.isElement=function(t){return!(!t||1!==t.nodeType)},m.isArray=p||function(t){return"[object Array]"===u.call(t)},m.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){m["is"+t]=function(e){return u.call(e)==="[object "+t+"]"}}),m.isArguments(arguments)||(m.isArguments=function(t){return m.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(t){return"function"==typeof t||!1}),m.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},m.isNaN=function(t){return m.isNumber(t)&&t!==+t},m.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===u.call(t)},m.isNull=function(t){return null===t},m.isUndefined=function(t){return void 0===t},m.has=function(t,e){return null!=t&&c.call(t,e)},m.noConflict=function(){return n._=r,this},m.identity=function(t){return t},m.constant=function(t){return function(){return t}},m.noop=function(){},m.property=function(t){return function(e){return null==e?void 0:e[t]}},m.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},m.matcher=m.matches=function(t){return t=m.extendOwn({},t),function(e){return m.isMatch(e,t)}},m.times=function(t,e,i){var n=Array(Math.max(0,t));e=y(e,i,1);for(var r=0;t>r;r++)n[r]=e(r);return n},m.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},m.now=Date.now||function(){return(new Date).getTime()};var M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},k=m.invert(M),P=function(t){var e=function(e){return t[e]},i="(?:"+m.keys(t).join("|")+")",n=RegExp(i),r=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(r,e):t}};m.escape=P(M),m.unescape=P(k),m.result=function(t,e,i){var n=null==t?void 0:t[e];return void 0===n&&(n=i),m.isFunction(n)?n.call(t):n};var O=0;m.uniqueId=function(t){var e=++O+"";return t?t+e:e},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var $=/(.)^/,I={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\u2028|\u2029/g,X=function(t){return"\\"+I[t]};m.template=function(t,e,i){!e&&i&&(e=i),e=m.defaults({},e,m.templateSettings);var n=RegExp([(e.escape||$).source,(e.interpolate||$).source,(e.evaluate||$).source].join("|")+"|$","g"),r=0,s="__p+='";t.replace(n,function(e,i,n,o,a){return s+=t.slice(r,a).replace(R,X),r=a+e.length,i?s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),e}),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(e.variable||"obj","_",s)}catch(a){throw a.source=s,a}var h=function(t){return o.call(this,t,m)},l=e.variable||"obj";return h.source="function("+l+"){\n"+s+"}",h},m.chain=function(t){var e=m(t);return e._chain=!0,e};var Y=function(t,e){return t._chain?m(e).chain():e};m.mixin=function(t){m.each(m.functions(t),function(e){var i=m[e]=t[e];m.prototype[e]=function(){var t=[this._wrapped];return h.apply(t,arguments),Y(this,i.apply(m,t))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=s[t];m.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],Y(this,i)}}),m.each(["concat","join","slice"],function(t){var e=s[t];m.prototype[t]=function(){return Y(this,e.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}).call(this),function(t,e){"object"==typeof exports&&exports?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Mustache={})}(this,function(t){function e(t){return"function"==typeof t}function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function n(t,e){return f.call(t,e)}function r(t){return!n(v,t)}function s(t){return String(t).replace(/[&<>"'\/]/g,function(t){return g[t]})}function o(e,n){function s(){if(w&&!S)for(;g.length;)delete v[g.pop()];else g=[];w=!1,S=!1}function o(t){if("string"==typeof t&&(t=t.split(y,2)),!d(t)||2!==t.length)throw new Error("Invalid tags: "+t);u=new RegExp(i(t[0])+"\\s*"),c=new RegExp("\\s*"+i(t[1])),p=new RegExp("\\s*"+i("}"+t[1]))}if(!e)return[];var u,c,p,f=[],v=[],g=[],w=!1,S=!1;o(n||t.tags);for(var T,_,D,C,z,A,M=new l(e);!M.eos();){if(T=M.pos,D=M.scanUntil(u))for(var k=0,P=D.length;P>k;++k)C=D.charAt(k),r(C)?g.push(v.length):S=!0,v.push(["text",C,T,T+1]),T+=1,"\n"===C&&s();if(!M.scan(u))break;if(w=!0,_=M.scan(E)||"name",M.scan(m),"="===_?(D=M.scanUntil(x),M.scan(x),M.scanUntil(c)):"{"===_?(D=M.scanUntil(p),M.scan(b),M.scanUntil(c),_="&"):D=M.scanUntil(c),!M.scan(c))throw new Error("Unclosed tag at "+M.pos);if(z=[_,D,T,M.pos],v.push(z),"#"===_||"^"===_)f.push(z);else if("/"===_){if(A=f.pop(),!A)throw new Error('Unopened section "'+D+'" at '+T);if(A[1]!==D)throw new Error('Unclosed section "'+A[1]+'" at '+T)}else"name"===_||"{"===_||"&"===_?S=!0:"="===_&&o(D)}if(A=f.pop())throw new Error('Unclosed section "'+A[1]+'" at '+M.pos);return h(a(v))}function a(t){for(var e,i,n=[],r=0,s=t.length;s>r;++r)e=t[r],e&&("text"===e[0]&&i&&"text"===i[0]?(i[1]+=e[1],i[3]=e[3]):(n.push(e),i=e));return n}function h(t){for(var e,i,n=[],r=n,s=[],o=0,a=t.length;a>o;++o)switch(e=t[o],e[0]){case"#":case"^":r.push(e),s.push(e),r=e[4]=[];break;case"/":i=s.pop(),i[5]=e[2],r=s.length>0?s[s.length-1][4]:n;break;default:r.push(e)}return n}function l(t){this.string=t,this.tail=t,this.pos=0}function u(t,e){this.view=null==t?{}:t,this.cache={".":this.view},this.parent=e}function c(){this.cache={}}var p=Object.prototype.toString,d=Array.isArray||function(t){return"[object Array]"===p.call(t)},f=RegExp.prototype.test,v=/\S/,g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},m=/\s*/,y=/\s+/,x=/\s*=/,b=/\s*\}/,E=/#|\^|\/|>|\{|&|=|!/;l.prototype.eos=function(){return""===this.tail},l.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var i=e[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},l.prototype.scanUntil=function(t){var e,i=this.tail.search(t);switch(i){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=e.length,e},u.prototype.push=function(t){return new u(t,this)},u.prototype.lookup=function(t){var i,n=this.cache;if(t in n)i=n[t];else{for(var r,s,o=this;o;){if(t.indexOf(".")>0)for(i=o.view,r=t.split("."),s=0;null!=i&&s<r.length;)i=i[r[s++]];else"object"==typeof o.view&&(i=o.view[t]);if(null!=i)break;o=o.parent}n[t]=i}return e(i)&&(i=i.call(this.view)),i},c.prototype.clearCache=function(){this.cache={}},c.prototype.parse=function(t,e){var i=this.cache,n=i[t];return null==n&&(n=i[t]=o(t,e)),n},c.prototype.render=function(t,e,i){var n=this.parse(t),r=e instanceof u?e:new u(e);return this.renderTokens(n,r,i,t)},c.prototype.renderTokens=function(t,e,i,n){for(var r,s,o,a="",h=0,l=t.length;l>h;++h)o=void 0,r=t[h],s=r[0],"#"===s?o=this._renderSection(r,e,i,n):"^"===s?o=this._renderInverted(r,e,i,n):">"===s?o=this._renderPartial(r,e,i,n):"&"===s?o=this._unescapedValue(r,e):"name"===s?o=this._escapedValue(r,e):"text"===s&&(o=this._rawValue(r)),void 0!==o&&(a+=o);return a},c.prototype._renderSection=function(t,i,n,r){function s(t){return o.render(t,i,n)}var o=this,a="",h=i.lookup(t[1]);if(h){if(d(h))for(var l=0,u=h.length;u>l;++l)a+=this.renderTokens(t[4],i.push(h[l]),n,r);else if("object"==typeof h||"string"==typeof h)a+=this.renderTokens(t[4],i.push(h),n,r);else if(e(h)){if("string"!=typeof r)throw new Error("Cannot use higher-order sections without the original template");h=h.call(i.view,r.slice(t[3],t[5]),s),null!=h&&(a+=h)}else a+=this.renderTokens(t[4],i,n,r);return a}},c.prototype._renderInverted=function(t,e,i,n){var r=e.lookup(t[1]);return!r||d(r)&&0===r.length?this.renderTokens(t[4],e,i,n):void 0},c.prototype._renderPartial=function(t,i,n){if(n){var r=e(n)?n(t[1]):n[t[1]];return null!=r?this.renderTokens(this.parse(r),i,n,r):void 0}},c.prototype._unescapedValue=function(t,e){var i=e.lookup(t[1]);return null!=i?i:void 0},c.prototype._escapedValue=function(e,i){var n=i.lookup(e[1]);return null!=n?t.escape(n):void 0},c.prototype._rawValue=function(t){return t[1]},t.name="mustache.js",t.version="1.1.0",t.tags=["{{","}}"];var w=new c;t.clearCache=function(){return w.clearCache()},t.parse=function(t,e){return w.parse(t,e)},t.render=function(t,e,i){return w.render(t,e,i)},t.to_html=function(i,n,r,s){var o=t.render(i,n,r);return e(s)?void s(o):o},t.escape=s,t.Scanner=l,t.Context=u,t.Writer=c}),function(t){"use strict";function e(){}function i(t){if(!t||"object"!=typeof t)return!1;var e=w(t)||de;return/object|function/.test(typeof e.Element)?t instanceof e.Element:1===t.nodeType&&"string"==typeof t.nodeName}function n(t){return!(!t||!t.Window)&&t instanceof t.Window}function r(t){return!!t&&t instanceof ve}function s(t){return o(t)&&void 0!==typeof t.length&&a(t.splice)}function o(t){return!!t&&"object"==typeof t}function a(t){return"function"==typeof t}function h(t){return"number"==typeof t}function l(t){return"boolean"==typeof t}function u(t){return"string"==typeof t}function c(t){return u(t)?(fe.querySelector(t),!0):!1}function p(t,e){for(var i in e)t[i]=e[i];return t}function d(t,e){t.page=t.page||{},t.page.x=e.page.x,t.page.y=e.page.y,t.client=t.client||{},t.client.x=e.client.x,t.client.y=e.client.y,t.timeStamp=e.timeStamp}function f(t,e,i){e||(e=i.pointerIds.length>1?_(i.pointers):i.pointers[0]),m(e,we,i),t.page.x=we.x,t.page.y=we.y,y(e,we,i),t.client.x=we.x,t.client.y=we.y,t.timeStamp=(new Date).getTime()}function v(t,e,i){t.page.x=i.page.x-e.page.x,t.page.y=i.page.y-e.page.y,t.client.x=i.client.x-e.client.x,t.client.y=i.client.y-e.client.y,t.timeStamp=(new Date).getTime()-e.timeStamp;var n=Math.max(t.timeStamp/1e3,.001);t.page.speed=Ee(t.page.x,t.page.y)/n,t.page.vx=t.page.x/n,t.page.vy=t.page.y/n,t.client.speed=Ee(t.client.x,t.page.y)/n,t.client.vx=t.client.x/n,t.client.vy=t.client.y/n}function g(t,e,i){return i=i||{},t=t||"page",i.x=e[t+"X"],i.y=e[t+"Y"],i}function m(t,e,i){return e=e||{},t instanceof L?/inertiastart/.test(t.type)?(i=i||t.interaction,p(e,i.inertiaStatus.upCoords.page),e.x+=i.inertiaStatus.sx,e.y+=i.inertiaStatus.sy):(e.x=t.pageX,e.y=t.pageY):Ne?(g("screen",t,e),e.x+=de.scrollX,e.y+=de.scrollY):g("page",t,e),e}function y(t,e,i){return e=e||{},t instanceof L?/inertiastart/.test(t.type)?(p(e,i.inertiaStatus.upCoords.client),e.x+=i.inertiaStatus.sx,e.y+=i.inertiaStatus.sy):(e.x=t.clientX,e.y=t.clientY):g(Ne?"screen":"client",t,e),e}function x(t){return t=t||de,{x:t.scrollX||t.document.documentElement.scrollLeft,y:t.scrollY||t.document.documentElement.scrollTop}}function b(t){return h(t.pointerId)?t.pointerId:t.identifier}function E(t){return t instanceof ye?t.correspondingUseElement:t}function w(t){if(n(t))return t;var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||de}function S(t){var e=qe?{x:0,y:0}:x(w(t)),i=t instanceof ge?t.getBoundingClientRect():t.getClientRects()[0];return i&&{left:i.left+e.x,right:i.right+e.x,top:i.top+e.y,bottom:i.bottom+e.y,width:i.width||i.right-i.left,height:i.heigh||i.bottom-i.top}}function T(t){var e=[];return s(t)?(e[0]=t[0],e[1]=t[1]):"touchend"===t.type?1===t.touches.length?(e[0]=t.touches[0],e[1]=t.changedTouches[0]):0===t.touches.length&&(e[0]=t.changedTouches[0],e[1]=t.changedTouches[1]):(e[0]=t.touches[0],e[1]=t.touches[1]),e}function _(t){var e=T(t);return{pageX:(e[0].pageX+e[1].pageX)/2,pageY:(e[0].pageY+e[1].pageY)/2,clientX:(e[0].clientX+e[1].clientX)/2,clientY:(e[0].clientY+e[1].clientY)/2}}function D(t){if(t.length||t.touches&&t.touches.length>1){var e=T(t),i=Math.min(e[0].pageX,e[1].pageX),n=Math.min(e[0].pageY,e[1].pageY),r=Math.max(e[0].pageX,e[1].pageX),s=Math.max(e[0].pageY,e[1].pageY);return{x:i,y:n,left:i,top:n,width:r-i,height:s-n}}}function C(t,e){e=e||ze.deltaSource;var i=e+"X",n=e+"Y",r=T(t),s=r[0][i]-r[1][i],o=r[0][n]-r[1][n];return Ee(s,o)}function z(t,e,i){i=i||ze.deltaSource;var n=i+"X",r=i+"Y",s=T(t),o=s[0][n]-s[1][n],a=s[0][r]-s[1][r],l=180*Math.atan(a/o)/Math.PI;if(h(e)){var u=l-e,c=u%360;c>315?l-=360+l/360|0:c>135?l-=180+l/360|0:-315>c?l+=360+l/360|0:-135>c&&(l+=180+l/360|0)}return l}function A(t,e){var n=t?t.options.origin:ze.origin;return"parent"===n?n=I(e):"self"===n?n=t.getRect(e):c(n)&&(n=$(e,n)||{x:0,y:0}),a(n)&&(n=n(t&&e)),i(n)&&(n=S(n)),n.x="x"in n?n.x:n.left,n.y="y"in n?n.y:n.top,n}function M(t,e,i,n){var r=1-t;return r*r*e+2*r*t*i+t*t*n}function k(t,e,i,n,r,s,o){return{x:M(o,t,i,r),y:M(o,e,n,s)}}function P(t,e,i,n){return t/=n,-i*t*(t-2)+e}function O(t,e){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function $(t,e){for(var n=I(t);i(n);){if(le(n,e))return n;n=I(n)}return null}function I(t){var e=t.parentNode;if(r(e)){for(;(e=e.host)&&r(e););return e}return e}function R(t,e){return t._context===e.ownerDocument||O(t._context,e)}function X(t,e,n){var r=t.options.ignoreFrom;return r&&i(n)?u(r)?ue(n,r,e):i(r)?O(r,n):!1:!1}function Y(t,e,n){var r=t.options.allowFrom;return r?i(n)?u(r)?ue(n,r,e):i(r)?O(r,n):!1:!1:!0}function F(t,e){if(!e)return!1;var i=e.options.drag.axis;return"xy"===t||"xy"===i||i===t}function j(t,e){var i=t.options;return/^resize/.test(e)&&(e="resize"),i[e].snap&&i[e].snap.enabled}function N(t,e){var i=t.options;return/^resize/.test(e)&&(e="resize"),i[e].restrict&&i[e].restrict.enabled}function q(t,e){var i=t.options;return/^resize/.test(e)&&(e="resize"),i[e].autoScroll&&i[e].autoScroll.enabled}function H(t,e,i){for(var n=t.options,r=n[i.name].max,s=n[i.name].maxPerElement,o=0,a=0,h=0,l=0,u=_e.length;u>l;l++){var c=_e[l],p=c.prepared.name,d=c.interacting();if(d){if(o++,o>=Ie)return!1;if(c.target===t){if(a+=p===i.name|0,a>=r)return!1;if(c.element===e&&(h++,p!==i.name||h>=s))return!1}}}return Ie>0}function U(t){var e,i,n,r,s,o=t[0],a=o?0:-1,h=[],l=[];for(r=1;r<t.length;r++)if(e=t[r],e&&e!==o)if(o){if(e.parentNode!==e.ownerDocument)if(o.parentNode!==e.ownerDocument){if(!h.length)for(i=o;i.parentNode&&i.parentNode!==i.ownerDocument;)h.unshift(i),i=i.parentNode;if(o instanceof xe&&e instanceof ge&&!(e instanceof me)){if(e===o.parentNode)continue;i=e.ownerSVGElement}else i=e;for(l=[];i.parentNode!==i.ownerDocument;)l.unshift(i),i=i.parentNode;for(s=0;l[s]&&l[s]===h[s];)s++;var u=[l[s-1],l[s],h[s]];for(n=u[0].lastChild;n;){if(n===u[1]){o=e,a=r,h=[];break}if(n===u[2])break;n=n.previousSibling}}else o=e,a=r}else o=e,a=r;return a}function B(){if(this.target=null,this.element=null,this.dropTarget=null,this.dropElement=null,this.prevDropTarget=null,this.prevDropElement=null,this.prepared={name:null,axis:null,edges:null},this.matches=[],this.matchElements=[],this.inertiaStatus={active:!1,smoothEnd:!1,startEvent:null,upCoords:{},xe:0,ye:0,sx:0,sy:0,t0:0,vx0:0,vys:0,duration:0,resumeDx:0,resumeDy:0,lambda_v0:0,one_ve_v0:0,i:null},a(Function.prototype.bind))this.boundInertiaFrame=this.inertiaFrame.bind(this),this.boundSmoothEndFrame=this.smoothEndFrame.bind(this);else{var t=this;this.boundInertiaFrame=function(){return t.inertiaFrame()},this.boundSmoothEndFrame=function(){return t.smoothEndFrame()}}this.activeDrops={dropzones:[],elements:[],rects:[]},this.pointers=[],this.pointerIds=[],this.downTargets=[],this.downTimes=[],this.holdTimers=[],this.prevCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.curCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.startCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.pointerDelta={page:{x:0,y:0,vx:0,vy:0,speed:0},client:{x:0,y:0,vx:0,vy:0,speed:0},timeStamp:0},this.downEvent=null,this.downPointer={},this._eventTarget=null,this._curEventTarget=null,this.prevEvent=null,this.tapTime=0,this.prevTap=null,this.startOffset={left:0,right:0,top:0,bottom:0},this.restrictOffset={left:0,right:0,top:0,bottom:0},this.snapOffsets=[],this.gesture={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0},this.snapStatus={x:0,y:0,dx:0,dy:0,realX:0,realY:0,snappedX:0,snappedY:0,targets:[],locked:!1,changed:!1},this.restrictStatus={dx:0,dy:0,restrictedX:0,restrictedY:0,snap:null,restricted:!1,changed:!1},this.restrictStatus.snap=this.snapStatus,this.pointerIsDown=!1,this.pointerWasMoved=!1,this.gesturing=!1,this.dragging=!1,this.resizing=!1,this.resizeAxes="xy",this.mouse=!1,_e.push(this)}function V(t,e,i){var n,r=0,s=_e.length,o=/mouse/i.test(t.pointerType||e)||4===t.pointerType,a=b(t);if(/down|start/i.test(e))for(r=0;s>r;r++){n=_e[r];var h=i;if(n.inertiaStatus.active&&n.target.options[n.prepared.name].inertia.allowResume&&n.mouse===o)for(;h;){if(h===n.element)return n.pointers[0]&&n.removePointer(n.pointers[0]),n.addPointer(t),n;h=I(h)}}if(o||!Me&&!ke){for(r=0;s>r;r++)if(_e[r].mouse&&!_e[r].inertiaStatus.active)return _e[r];for(r=0;s>r;r++)if(_e[r].mouse&&(!/down/.test(e)||!_e[r].inertiaStatus.active))return n;return n=new B,n.mouse=!0,n}for(r=0;s>r;r++)if(he(_e[r].pointerIds,a))return _e[r];if(/up|end|out/i.test(e))return null;for(r=0;s>r;r++)if(n=_e[r],!(n.prepared.name&&!n.target.options.gesture.enabled||n.interacting()||!o&&n.mouse))return n.addPointer(t),n;return new B}function W(t){return function(e){var i,n,r=E(e.path?e.path[0]:e.target),s=E(e.currentTarget);if(Me&&/touch/.test(e.type))for($e=(new Date).getTime(),n=0;n<e.changedTouches.length;n++){var o=e.changedTouches[n];i=V(o,e.type,r),i&&(i._updateEventTargets(r,s),i[t](o,e,r,s))}else{if(!ke&&/mouse/.test(e.type)){for(n=0;n<_e.length;n++)if(!_e[n].mouse&&_e[n].pointerIsDown)return;if((new Date).getTime()-$e<500)return}if(i=V(e,e.type,r),!i)return;i._updateEventTargets(r,s),i[t](e,e,r,s)}}}function L(t,e,i,n,r,s){var o,a,h=t.target,l=t.snapStatus,u=t.restrictStatus,c=t.pointers,d=(h&&h.options||ze).deltaSource,f=d+"X",v=d+"Y",g=h?h.options:ze,m=A(h,r),y="start"===n,x="end"===n,b=y?t.startCoords:t.curCoords;r=r||t.element,a=p({},b.page),o=p({},b.client),a.x-=m.x,a.y-=m.y,o.x-=m.x,o.y-=m.y;var E=g[i].snap&&g[i].snap.relativePoints;!j(h,i)||y&&E&&E.length||(this.snap={range:l.range,locked:l.locked,x:l.snappedX,y:l.snappedY,realX:l.realX,realY:l.realY,dx:l.dx,dy:l.dy},l.locked&&(a.x+=l.dx,a.y+=l.dy,o.x+=l.dx,o.y+=l.dy)),!N(h,i)||y&&g[i].restrict.elementRect||!u.restricted||(a.x+=u.dx,a.y+=u.dy,o.x+=u.dx,o.y+=u.dy,this.restrict={dx:u.dx,dy:u.dy}),this.pageX=a.x,this.pageY=a.y,this.clientX=o.x,this.clientY=o.y,this.x0=t.startCoords.page.x,this.y0=t.startCoords.page.y,this.clientX0=t.startCoords.client.x,this.clientY0=t.startCoords.client.y,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.button=e.button,this.target=r,this.t0=t.downTimes[0],this.type=i+(n||""),this.interaction=t,this.interactable=h;var w=t.inertiaStatus;if(w.active&&(this.detail="inertia"),s&&(this.relatedTarget=s),x?"client"===d?(this.dx=o.x-t.startCoords.client.x,this.dy=o.y-t.startCoords.client.y):(this.dx=a.x-t.startCoords.page.x,this.dy=a.y-t.startCoords.page.y):y?(this.dx=0,this.dy=0):"inertiastart"===n?(this.dx=t.prevEvent.dx,this.dy=t.prevEvent.dy):"client"===d?(this.dx=o.x-t.prevEvent.clientX,this.dy=o.y-t.prevEvent.clientY):(this.dx=a.x-t.prevEvent.pageX,this.dy=a.y-t.prevEvent.pageY),t.prevEvent&&"inertia"===t.prevEvent.detail&&!w.active&&g[i].inertia&&g[i].inertia.zeroResumeDelta&&(w.resumeDx+=this.dx,w.resumeDy+=this.dy,this.dx=this.dy=0),"resize"===i&&t.resizeAxes?g.resize.square?("y"===t.resizeAxes?this.dx=this.dy:this.dy=this.dx,this.axes="xy"):(this.axes=t.resizeAxes,"x"===t.resizeAxes?this.dy=0:"y"===t.resizeAxes&&(this.dx=0)):"gesture"===i&&(this.touches=[c[0],c[1]],y?(this.distance=C(c,d),this.box=D(c),this.scale=1,this.ds=0,this.angle=z(c,void 0,d),this.da=0):x||e instanceof L?(this.distance=t.prevEvent.distance,this.box=t.prevEvent.box,this.scale=t.prevEvent.scale,this.ds=this.scale-1,this.angle=t.prevEvent.angle,this.da=this.angle-t.gesture.startAngle):(this.distance=C(c,d),this.box=D(c),this.scale=this.distance/t.gesture.startDistance,this.angle=z(c,t.gesture.prevAngle,d),this.ds=this.scale-t.gesture.prevScale,this.da=this.angle-t.gesture.prevAngle)),y)this.timeStamp=t.downTimes[0],this.dt=0,this.duration=0,this.speed=0,this.velocityX=0,this.velocityY=0;
else if("inertiastart"===n)this.timeStamp=t.prevEvent.timeStamp,this.dt=t.prevEvent.dt,this.duration=t.prevEvent.duration,this.speed=t.prevEvent.speed,this.velocityX=t.prevEvent.velocityX,this.velocityY=t.prevEvent.velocityY;else if(this.timeStamp=(new Date).getTime(),this.dt=this.timeStamp-t.prevEvent.timeStamp,this.duration=this.timeStamp-t.downTimes[0],e instanceof L){var S=this[f]-t.prevEvent[f],T=this[v]-t.prevEvent[v],_=this.dt/1e3;this.speed=Ee(S,T)/_,this.velocityX=S/_,this.velocityY=T/_}else this.speed=t.pointerDelta[d].speed,this.velocityX=t.pointerDelta[d].vx,this.velocityY=t.pointerDelta[d].vy;if((x||"inertiastart"===n)&&t.prevEvent.speed>600&&this.timeStamp-t.prevEvent.timeStamp<150){var M=180*Math.atan2(t.prevEvent.velocityY,t.prevEvent.velocityX)/Math.PI,k=22.5;0>M&&(M+=360);var P=M>=135-k&&225+k>M,O=M>=225-k&&315+k>M,$=!P&&(M>=315-k||45+k>M),I=!O&&M>=45-k&&135+k>M;this.swipe={up:O,down:I,left:P,right:$,angle:M,speed:t.prevEvent.speed,velocity:{x:t.prevEvent.velocityX,y:t.prevEvent.velocityY}}}}function Q(){this.originalEvent.preventDefault()}function K(t){var e="";if("drag"===t.name&&(e=Re.drag),"resize"===t.name)if(t.axis)e=Re[t.name+t.axis];else if(t.edges){for(var i="resize",n=["top","bottom","left","right"],r=0;4>r;r++)t.edges[n[r]]&&(i+=n[r]);e=Re[i]}return e}function G(t,e,n,r,s,o){if(!e)return!1;if(e===!0){var a=h(o.width)?o.width:o.right-o.left,l=h(o.height)?o.height:o.bottom-o.top;if(0>a&&("left"===t?t="right":"right"===t&&(t="left")),0>l&&("top"===t?t="bottom":"bottom"===t&&(t="top")),"left"===t)return n.x<(a>=0?o.left:o.right)+Pe;if("top"===t)return n.y<(l>=0?o.top:o.bottom)+Pe;if("right"===t)return n.x>(a>=0?o.right:o.left)-Pe;if("bottom"===t)return n.y>(l>=0?o.bottom:o.top)-Pe}return i(r)?i(e)?e===r:ue(r,e,s):!1}function J(t,e,i){var n,r=this.getRect(i),s=!1,a=null,h=null,l=p({},e.curCoords.page),u=this.options;if(!r)return null;if(Xe.resize&&u.resize.enabled){var c=u.resize;if(n={left:!1,right:!1,top:!1,bottom:!1},o(c.edges)){for(var d in n)n[d]=G(d,c.edges[d],l,e._eventTarget,i,r);n.left=n.left&&!n.right,n.top=n.top&&!n.bottom,s=n.left||n.right||n.top||n.bottom}else{var f="y"!==u.resize.axis&&l.x>r.right-Pe,v="x"!==u.resize.axis&&l.y>r.bottom-Pe;s=f||v,h=(f?"x":"")+(v?"y":"")}}return a=s?"resize":Xe.drag&&u.drag.enabled?"drag":null,Xe.gesture&&e.pointerIds.length>=2&&!e.dragging&&!e.resizing&&(a="gesture"),a?{name:a,axis:h,edges:n}:null}function Z(t,e){if(!o(t))return null;var i=t.name,n=e.options;return("resize"===i&&n.resize.enabled||"drag"===i&&n.drag.enabled||"gesture"===i&&n.gesture.enabled)&&Xe[i]?(("resize"===i||"resizeyx"===i)&&(i="resizexy"),t):null}function te(t,e){var n={},r=Ce[t.type],s=E(t.path?t.path[0]:t.target),o=s;e=e?!0:!1;for(var a in t)n[a]=t[a];for(n.originalEvent=t,n.preventDefault=Q;i(o);){for(var h=0;h<r.selectors.length;h++){var l=r.selectors[h],u=r.contexts[h];if(le(o,l)&&O(u,s)&&O(u,o)){var c=r.listeners[h];n.currentTarget=o;for(var p=0;p<c.length;p++)c[p][1]===e&&c[p][0](n)}}o=I(o)}}function ee(t){return te.call(this,t,!0)}function ie(t,e){return Te.get(t,e)||new ne(t,e)}function ne(t,e){this._element=t,this._iEvents=this._iEvents||{};var n;if(c(t)){this.selector=t;var r=e&&e.context;n=r?w(r):de,r&&(n.Node?r instanceof n.Node:i(r)||r===n.document)&&(this._context=r)}else n=w(t),i(t,n)&&(be?(Ve.add(this._element,ce.down,We.pointerDown),Ve.add(this._element,ce.move,We.pointerHover)):(Ve.add(this._element,"mousedown",We.pointerDown),Ve.add(this._element,"mousemove",We.pointerHover),Ve.add(this._element,"touchstart",We.pointerDown),Ve.add(this._element,"touchmove",We.pointerHover)));this._doc=n.document,he(Se,this._doc)||oe(this._doc),Te.push(this),this.set(e)}function re(t,e){var i=!1;return function(){return i||(de.console.warn(e),i=!0),t.apply(this,arguments)}}function se(t){for(var e=0;e<_e.length;e++)_e[e].pointerEnd(t,t)}function oe(t){if(!he(Se,t)){var e=t.defaultView||t.parentWindow;for(var i in Ce)Ve.add(t,i,te),Ve.add(t,i,ee,!0);be?(ce=be===e.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"},Ve.add(t,ce.down,We.selectorDown),Ve.add(t,ce.move,We.pointerMove),Ve.add(t,ce.over,We.pointerOver),Ve.add(t,ce.out,We.pointerOut),Ve.add(t,ce.up,We.pointerUp),Ve.add(t,ce.cancel,We.pointerCancel),Ve.add(t,ce.move,Ae.edgeMove)):(Ve.add(t,"mousedown",We.selectorDown),Ve.add(t,"mousemove",We.pointerMove),Ve.add(t,"mouseup",We.pointerUp),Ve.add(t,"mouseover",We.pointerOver),Ve.add(t,"mouseout",We.pointerOut),Ve.add(t,"touchstart",We.selectorDown),Ve.add(t,"touchmove",We.pointerMove),Ve.add(t,"touchend",We.pointerUp),Ve.add(t,"touchcancel",We.pointerCancel),Ve.add(t,"mousemove",Ae.edgeMove),Ve.add(t,"touchmove",Ae.edgeMove)),Ve.add(e,"blur",se);try{if(e.frameElement){var n=e.frameElement.ownerDocument,r=n.defaultView;Ve.add(n,"mouseup",We.pointerEnd),Ve.add(n,"touchend",We.pointerEnd),Ve.add(n,"touchcancel",We.pointerEnd),Ve.add(n,"pointerup",We.pointerEnd),Ve.add(n,"MSPointerUp",We.pointerEnd),Ve.add(r,"blur",se)}}catch(s){ie.windowParentError=s}Ve.useAttachEvent&&(Ve.add(t,"selectstart",function(t){var e=_e[0];e.currentAction()&&e.checkAndPreventDefault(t)}),Ve.add(t,"dblclick",W("ie8Dblclick"))),Se.push(t)}}function ae(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1}function he(t,e){return-1!==ae(t,e)}function le(e,i,n){return pe?pe(e,i,n):(de!==t&&(i=i.replace(/\/deep\//g," ")),e[He](i))}function ue(t,e,n){for(;i(t);){if(le(t,e))return!0;if(t=I(t),t===n)return le(t,e)}return!1}var ce,pe,de=function(){var e=t.document.createTextNode("");return e.ownerDocument!==t.document&&"function"==typeof t.wrap&&t.wrap(e)===e?t.wrap(t):t}(),fe=de.document,ve=de.DocumentFragment||e,ge=de.SVGElement||e,me=de.SVGSVGElement||e,ye=de.SVGElementInstance||e,xe=de.HTMLElement||de.Element,be=de.PointerEvent||de.MSPointerEvent,Ee=Math.hypot||function(t,e){return Math.sqrt(t*t+e*e)},we={},Se=[],Te=[],_e=[],De=!1,Ce={},ze={base:{accept:null,actionChecker:null,styleCursor:!0,preventDefault:"auto",origin:{x:0,y:0},deltaSource:"page",allowFrom:null,ignoreFrom:null,_context:fe,dropChecker:null},drag:{enabled:!1,manualStart:!0,max:1/0,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,axis:"xy"},drop:{enabled:!1,accept:null,overlap:"pointer"},resize:{enabled:!1,manualStart:!1,max:1/0,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,square:!1,axis:"xy",edges:null,invert:"none"},gesture:{manualStart:!1,enabled:!1,max:1/0,maxPerElement:1,restrict:null},perAction:{manualStart:!1,max:1/0,maxPerElement:1,snap:{enabled:!1,endOnly:!1,range:1/0,targets:null,offsets:null,relativePoints:null},restrict:{enabled:!1,endOnly:!1},autoScroll:{enabled:!1,container:null,margin:60,speed:300},inertia:{enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,zeroResumeDelta:!0,smoothEndDuration:300}},_holdDuration:600},Ae={interaction:null,i:null,x:0,y:0,scroll:function(){var t=Ae.interaction.target.options[Ae.interaction.prepared.name].autoScroll,e=t.container||w(Ae.interaction.element),i=(new Date).getTime(),r=(i-Ae.prevTime)/1e3,s=t.speed*r;s>=1&&(n(e)?e.scrollBy(Ae.x*s,Ae.y*s):e&&(e.scrollLeft+=Ae.x*s,e.scrollTop+=Ae.y*s),Ae.prevTime=i),Ae.isScrolling&&(Be(Ae.i),Ae.i=Ue(Ae.scroll))},edgeMove:function(t){for(var e,i,r=!1,s=0;s<_e.length;s++)if(e=_e[s],e.interacting()&&q(e.target,e.prepared.name)){i=e.target,r=!0;break}if(r){var o,a,h,l,u=i.options[e.prepared.name].autoScroll,c=u.container||w(e.element);if(n(c))l=t.clientX<Ae.margin,o=t.clientY<Ae.margin,a=t.clientX>c.innerWidth-Ae.margin,h=t.clientY>c.innerHeight-Ae.margin;else{var p=S(c);l=t.clientX<p.left+Ae.margin,o=t.clientY<p.top+Ae.margin,a=t.clientX>p.right-Ae.margin,h=t.clientY>p.bottom-Ae.margin}Ae.x=a?1:l?-1:0,Ae.y=h?1:o?-1:0,Ae.isScrolling||(Ae.margin=u.margin,Ae.speed=u.speed,Ae.start(e))}},isScrolling:!1,prevTime:0,start:function(t){Ae.isScrolling=!0,Be(Ae.i),Ae.interaction=t,Ae.prevTime=(new Date).getTime(),Ae.i=Ue(Ae.scroll)},stop:function(){Ae.isScrolling=!1,Be(Ae.i)}},Me="ontouchstart"in de||de.DocumentTouch&&fe instanceof de.DocumentTouch,ke=!!be,Pe=Me||ke?20:10,Oe=1,$e=0,Ie=1/0,Re=fe.all&&!de.atob?{drag:"move",resizex:"e-resize",resizey:"s-resize",resizexy:"se-resize",resizetop:"n-resize",resizeleft:"w-resize",resizebottom:"s-resize",resizeright:"e-resize",resizetopleft:"se-resize",resizebottomright:"se-resize",resizetopright:"ne-resize",resizebottomleft:"ne-resize",gesture:""}:{drag:"move",resizex:"ew-resize",resizey:"ns-resize",resizexy:"nwse-resize",resizetop:"ns-resize",resizeleft:"ew-resize",resizebottom:"ns-resize",resizeright:"ew-resize",resizetopleft:"nwse-resize",resizebottomright:"nwse-resize",resizetopright:"nesw-resize",resizebottomleft:"nesw-resize",gesture:""},Xe={drag:!0,resize:!0,gesture:!0},Ye="onmousewheel"in fe?"mousewheel":"wheel",Fe=["dragstart","dragmove","draginertiastart","dragend","dragenter","dragleave","dropactivate","dropdeactivate","dropmove","drop","resizestart","resizemove","resizeinertiastart","resizeend","gesturestart","gesturemove","gestureinertiastart","gestureend","down","move","up","cancel","tap","doubletap","hold"],je={},Ne="Opera"==navigator.appName&&Me&&navigator.userAgent.match("Presto"),qe=/iP(hone|od|ad)/.test(navigator.platform)&&/OS [1-7][^\d]/.test(navigator.appVersion),He="matches"in Element.prototype?"matches":"webkitMatchesSelector"in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector"in Element.prototype?"mozMatchesSelector":"oMatchesSelector"in Element.prototype?"oMatchesSelector":"msMatchesSelector",Ue=t.requestAnimationFrame,Be=t.cancelAnimationFrame,Ve=function(){function t(t,e,a,p){var d=ae(l,t),f=u[d];if(f||(f={events:{},typeCount:0},d=l.push(t)-1,u.push(f),c.push(s?{supplied:[],wrapped:[],useCount:[]}:null)),f.events[e]||(f.events[e]=[],f.typeCount++),!he(f.events[e],a)){var v;if(s){var g=c[d],m=ae(g.supplied,a),y=g.wrapped[m]||function(e){e.immediatePropagationStopped||(e.target=e.srcElement,e.currentTarget=t,e.preventDefault=e.preventDefault||i,e.stopPropagation=e.stopPropagation||n,e.stopImmediatePropagation=e.stopImmediatePropagation||r,/mouse|click/.test(e.type)&&(e.pageX=e.clientX+w(t).document.documentElement.scrollLeft,e.pageY=e.clientY+w(t).document.documentElement.scrollTop),a(e))};v=t[o](h+e,y,Boolean(p)),-1===m?(g.supplied.push(a),g.wrapped.push(y),g.useCount.push(1)):g.useCount[m]++}else v=t[o](e,a,p||!1);return f.events[e].push(a),v}}function e(t,i,n,r){var o,p,d,f=ae(l,t),v=u[f],g=n;if(v&&v.events)if(s&&(p=c[f],d=ae(p.supplied,n),g=p.wrapped[d]),"all"!==i){if(v.events[i]){var m=v.events[i].length;if("all"===n)for(o=0;m>o;o++)e(t,i,v.events[i][o],Boolean(r));else for(o=0;m>o;o++)if(v.events[i][o]===n){t[a](h+i,g,r||!1),v.events[i].splice(o,1),s&&p&&(p.useCount[d]--,0===p.useCount[d]&&(p.supplied.splice(d,1),p.wrapped.splice(d,1),p.useCount.splice(d,1)));break}v.events[i]&&0===v.events[i].length&&(v.events[i]=null,v.typeCount--)}v.typeCount||(u.splice(f),l.splice(f),c.splice(f))}else for(i in v.events)v.events.hasOwnProperty(i)&&e(t,i,"all")}function i(){this.returnValue=!1}function n(){this.cancelBubble=!0}function r(){this.cancelBubble=!0,this.immediatePropagationStopped=!0}var s="attachEvent"in de&&!("addEventListener"in de),o=s?"attachEvent":"addEventListener",a=s?"detachEvent":"removeEventListener",h=s?"on":"",l=[],u=[],c=[];return{add:t,remove:e,useAttachEvent:s,_elements:l,_targets:u,_attachedListeners:c}}();B.prototype={getPageXY:function(t,e){return m(t,e,this)},getClientXY:function(t,e){return y(t,e,this)},setEventXY:function(t,e){return f(t,e,this)},pointerOver:function(t,e,i){function n(t,e){t&&R(t,i)&&!X(t,i,i)&&Y(t,i,i)&&le(i,e)&&(r.push(t),s.push(i))}if(!this.prepared.name&&this.mouse){var r=[],s=[],o=this.element;this.addPointer(t),!this.target||!X(this.target,this.element,i)&&Y(this.target,this.element,i)||(this.target=null,this.element=null,this.matches=[],this.matchElements=[]);var a=Te.get(i),h=a&&!X(a,i,i)&&Y(a,i,i)&&Z(a.getAction(t,this,i),a);h&&!H(a,i,h)&&(h=null),h?(this.target=a,this.element=i,this.matches=[],this.matchElements=[]):(Te.forEachSelector(n),this.validateSelector(t,r,s)?(this.matches=r,this.matchElements=s,this.pointerHover(t,e,this.matches,this.matchElements),Ve.add(i,be?ce.move:"mousemove",We.pointerHover)):this.target&&(O(o,i)?(this.pointerHover(t,e,this.matches,this.matchElements),Ve.add(this.element,be?ce.move:"mousemove",We.pointerHover)):(this.target=null,this.element=null,this.matches=[],this.matchElements=[])))}},pointerHover:function(t,e,i,n,r,s){var o=this.target;if(!this.prepared.name&&this.mouse){var a;this.setEventXY(this.curCoords,t),r?a=this.validateSelector(t,r,s):o&&(a=Z(o.getAction(this.pointers[0],this,this.element),this.target)),o&&o.options.styleCursor&&(o._doc.documentElement.style.cursor=a?K(a):"")}else this.prepared.name&&this.checkAndPreventDefault(e,o,this.element)},pointerOut:function(t,e,i){this.prepared.name||(Te.get(i)||Ve.remove(i,be?ce.move:"mousemove",We.pointerHover),this.target&&this.target.options.styleCursor&&!this.interacting()&&(this.target._doc.documentElement.style.cursor=""))},selectorDown:function(t,e,n,r){function s(t,e,i){var r=pe?i.querySelectorAll(e):void 0;R(t,l)&&!X(t,l,n)&&Y(t,l,n)&&le(l,e,r)&&(a.matches.push(t),a.matchElements.push(l))}var o,a=this,h=Ve.useAttachEvent?p({},e):e,l=n,u=this.addPointer(t);if(this.holdTimers[u]=setTimeout(function(){a.pointerHold(Ve.useAttachEvent?h:t,h,n,r)},ze._holdDuration),this.pointerIsDown=!0,this.inertiaStatus.active&&this.target.selector)for(;i(l);){if(l===this.element&&Z(this.target.getAction(t,this,this.element),this.target).name===this.prepared.name)return Be(this.inertiaStatus.i),this.inertiaStatus.active=!1,void this.collectEventTargets(t,e,n,"down");l=I(l)}if(this.interacting())return void this.collectEventTargets(t,e,n,"down");for(this.setEventXY(this.curCoords,t);i(l)&&!o;)this.matches=[],this.matchElements=[],Te.forEachSelector(s),o=this.validateSelector(t,this.matches,this.matchElements),l=I(l);return o?(this.prepared.name=o.name,this.prepared.axis=o.axis,this.prepared.edges=o.edges,this.collectEventTargets(t,e,n,"down"),this.pointerDown(t,e,n,r,o)):(this.downTimes[u]=(new Date).getTime(),this.downTargets[u]=n,this.downEvent=e,p(this.downPointer,t),d(this.prevCoords,this.curCoords),this.pointerWasMoved=!1,void this.collectEventTargets(t,e,n,"down"))},pointerDown:function(t,e,i,n,r){if(!r&&!this.inertiaStatus.active&&this.pointerWasMoved&&this.prepared.name)return void this.checkAndPreventDefault(e,this.target,this.element);this.pointerIsDown=!0;var s,o=this.addPointer(t);if(this.pointerIds.length<2&&!this.target||!this.prepared.name){var a=Te.get(n);a&&!X(a,n,i)&&Y(a,n,i)&&(s=Z(r||a.getAction(t,this,n),a,i))&&H(a,n,s)&&(this.target=a,this.element=n)}var h=this.target,l=h&&h.options;if(h&&!this.interacting()){if(s=s||Z(r||h.getAction(t,this,n),h,this.element),this.setEventXY(this.startCoords),!s)return;l.styleCursor&&(h._doc.documentElement.style.cursor=K(s)),this.resizeAxes="resize"===s.name?s.axis:null,"gesture"===s&&this.pointerIds.length<2&&(s=null),this.prepared.name=s.name,this.prepared.axis=s.axis,this.prepared.edges=s.edges,this.snapStatus.snappedX=this.snapStatus.snappedY=this.restrictStatus.restrictedX=this.restrictStatus.restrictedY=0/0,this.downTimes[o]=(new Date).getTime(),this.downTargets[o]=i,this.downEvent=e,p(this.downPointer,t),this.setEventXY(this.prevCoords),this.pointerWasMoved=!1,this.checkAndPreventDefault(e,h,this.element)}else this.inertiaStatus.active&&n===this.element&&Z(h.getAction(t,this,this.element),h).name===this.prepared.name&&(Be(this.inertiaStatus.i),this.inertiaStatus.active=!1,this.checkAndPreventDefault(e,h,this.element))},setModifications:function(t,e){var i=this.target,n=!0,r=j(i,this.prepared.name)&&(!i.options[this.prepared.name].snap.endOnly||e),s=N(i,this.prepared.name)&&(!i.options[this.prepared.name].restrict.endOnly||e);return r?this.setSnapping(t):this.snapStatus.locked=!1,s?this.setRestriction(t):this.restrictStatus.restricted=!1,r&&this.snapStatus.locked&&!this.snapStatus.changed?n=s&&this.restrictStatus.restricted&&this.restrictStatus.changed:s&&this.restrictStatus.restricted&&!this.restrictStatus.changed&&(n=!1),n},setStartOffsets:function(t,e,i){var n,r,s=e.getRect(i),o=A(e,i),a=e.options[this.prepared.name].snap,h=e.options[this.prepared.name].restrict;s?(this.startOffset.left=this.startCoords.page.x-s.left,this.startOffset.top=this.startCoords.page.y-s.top,this.startOffset.right=s.right-this.startCoords.page.x,this.startOffset.bottom=s.bottom-this.startCoords.page.y,n="width"in s?s.width:s.right-s.left,r="height"in s?s.height:s.bottom-s.top):this.startOffset.left=this.startOffset.top=this.startOffset.right=this.startOffset.bottom=0,this.snapOffsets.splice(0);var l=a&&"startCoords"===a.offset?{x:this.startCoords.page.x-o.x,y:this.startCoords.page.y-o.y}:a&&a.offset||{x:0,y:0};if(s&&a&&a.relativePoints&&a.relativePoints.length)for(var u=0;u<a.relativePoints.length;u++)this.snapOffsets.push({x:this.startOffset.left-n*a.relativePoints[u].x+l.x,y:this.startOffset.top-r*a.relativePoints[u].y+l.y});else this.snapOffsets.push(l);s&&h.elementRect?(this.restrictOffset.left=this.startOffset.left-n*h.elementRect.left,this.restrictOffset.top=this.startOffset.top-r*h.elementRect.top,this.restrictOffset.right=this.startOffset.right-n*(1-h.elementRect.right),this.restrictOffset.bottom=this.startOffset.bottom-r*(1-h.elementRect.bottom)):this.restrictOffset.left=this.restrictOffset.top=this.restrictOffset.right=this.restrictOffset.bottom=0},start:function(t,e,i){this.interacting()||!this.pointerIsDown||this.pointerIds.length<("gesture"===t.name?2:1)||(-1===ae(_e,this)&&_e.push(this),this.prepared.name=t.name,this.prepared.axis=t.axis,this.prepared.edges=t.edges,this.target=e,this.element=i,this.setStartOffsets(t.name,e,i),this.setModifications(this.startCoords.page),this.prevEvent=this[this.prepared.name+"Start"](this.downEvent))},pointerMove:function(t,e,n,r,s){this.recordPointer(t),this.setEventXY(this.curCoords,t instanceof L?this.inertiaStatus.startEvent:void 0);var o,a,h=this.curCoords.page.x===this.prevCoords.page.x&&this.curCoords.page.y===this.prevCoords.page.y&&this.curCoords.client.x===this.prevCoords.client.x&&this.curCoords.client.y===this.prevCoords.client.y,l=this.mouse?0:ae(this.pointerIds,b(t));if(this.pointerIsDown&&!this.pointerWasMoved&&(o=this.curCoords.client.x-this.startCoords.client.x,a=this.curCoords.client.y-this.startCoords.client.y,this.pointerWasMoved=Ee(o,a)>Oe),h||this.pointerIsDown&&!this.pointerWasMoved||(this.pointerIsDown&&clearTimeout(this.holdTimers[l]),this.collectEventTargets(t,e,n,"move")),this.pointerIsDown){if(h&&this.pointerWasMoved&&!s)return void this.checkAndPreventDefault(e,this.target,this.element);if(v(this.pointerDelta,this.prevCoords,this.curCoords),this.prepared.name){if(this.pointerWasMoved&&(!this.inertiaStatus.active||t instanceof L&&/inertiastart/.test(t.type))){if(!this.interacting()&&(v(this.pointerDelta,this.prevCoords,this.curCoords),"drag"===this.prepared.name)){var u=Math.abs(o),c=Math.abs(a),p=this.target.options.drag.axis,f=u>c?"x":c>u?"y":"xy";if("xy"!==f&&"xy"!==p&&p!==f){this.prepared.name=null;for(var g=n;i(g);){var m=Te.get(g);if(m&&m!==this.target&&!m.options.drag.manualStart&&"drag"===m.getAction(this.downPointer,this,g).name&&F(f,m)){this.prepared.name="drag",this.target=m,this.element=g;break}g=I(g)}if(!this.prepared.name){var y=function(t,e,i){var r=pe?i.querySelectorAll(e):void 0;if(t!==this.target)return R(t,n)&&!t.options.drag.manualStart&&!X(t,g,n)&&Y(t,g,n)&&le(g,e,r)&&"drag"===t.getAction(this.downPointer,this,g).name&&F(f,t)&&H(t,g,"drag")?t:void 0};for(g=n;i(g);){var x=Te.forEachSelector(y);if(x){this.prepared.name="drag",this.target=x,this.element=g;break}g=I(g)}}}}var E=!!this.prepared.name&&!this.interacting();if(E&&(this.target.options[this.prepared.name].manualStart||!H(this.target,this.element,this.prepared)))return void this.stop();if(this.prepared.name&&this.target){E&&this.start(this.prepared,this.target,this.element);var w=this.setModifications(this.curCoords.page,s);(w||E)&&(this.prevEvent=this[this.prepared.name+"Move"](e)),this.checkAndPreventDefault(e,this.target,this.element)}}d(this.prevCoords,this.curCoords),(this.dragging||this.resizing)&&Ae.edgeMove(e)}}},dragStart:function(t){var e=new L(this,t,"drag","start",this.element);this.dragging=!0,this.target.fire(e),this.activeDrops.dropzones=[],this.activeDrops.elements=[],this.activeDrops.rects=[],this.dynamicDrop||this.setActiveDrops(this.element);var i=this.getDropEvents(t,e);return i.activate&&this.fireActiveDrops(i.activate),e},dragMove:function(t){var e=this.target,i=new L(this,t,"drag","move",this.element),n=this.element,r=this.getDrop(i,n);this.dropTarget=r.dropzone,this.dropElement=r.element;var s=this.getDropEvents(t,i);return e.fire(i),s.leave&&this.prevDropTarget.fire(s.leave),s.enter&&this.dropTarget.fire(s.enter),s.move&&this.dropTarget.fire(s.move),this.prevDropTarget=this.dropTarget,this.prevDropElement=this.dropElement,i},resizeStart:function(t){var e=new L(this,t,"resize","start",this.element);if(this.prepared.edges){var i=this.target.getRect(this.element);if(this.target.options.resize.square){var n=p({},this.prepared.edges);n.top=n.top||n.left&&!n.bottom,n.left=n.left||n.top&&!n.right,n.bottom=n.bottom||n.right&&!n.top,n.right=n.right||n.bottom&&!n.left,this.prepared._squareEdges=n}else this.prepared._squareEdges=null;this.resizeRects={start:i,current:p({},i),restricted:p({},i),previous:p({},i),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},e.rect=this.resizeRects.restricted,e.deltaRect=this.resizeRects.delta}return this.target.fire(e),this.resizing=!0,e},resizeMove:function(t){var e=new L(this,t,"resize","move",this.element),i=this.prepared.edges,n=this.target.options.resize.invert,r="reposition"===n||"negate"===n;if(i){var s=e.dx,o=e.dy,a=this.resizeRects.start,h=this.resizeRects.current,l=this.resizeRects.restricted,u=this.resizeRects.delta,c=p(this.resizeRects.previous,l);if(this.target.options.resize.square){var d=i;i=this.prepared._squareEdges,d.left&&d.bottom||d.right&&d.top?o=-s:d.left||d.right?o=s:(d.top||d.bottom)&&(s=o)}if(i.top&&(h.top+=o),i.bottom&&(h.bottom+=o),i.left&&(h.left+=s),i.right&&(h.right+=s),r){if(p(l,h),"reposition"===n){var f;l.top>l.bottom&&(f=l.top,l.top=l.bottom,l.bottom=f),l.left>l.right&&(f=l.left,l.left=l.right,l.right=f)}}else l.top=Math.min(h.top,a.bottom),l.bottom=Math.max(h.bottom,a.top),l.left=Math.min(h.left,a.right),l.right=Math.max(h.right,a.left);l.width=l.right-l.left,l.height=l.bottom-l.top;for(var v in l)u[v]=l[v]-c[v];e.edges=this.prepared.edges,e.rect=l,e.deltaRect=u}return this.target.fire(e),e},gestureStart:function(t){var e=new L(this,t,"gesture","start",this.element);return e.ds=0,this.gesture.startDistance=this.gesture.prevDistance=e.distance,this.gesture.startAngle=this.gesture.prevAngle=e.angle,this.gesture.scale=1,this.gesturing=!0,this.target.fire(e),e},gestureMove:function(t){if(!this.pointerIds.length)return this.prevEvent;var e;return e=new L(this,t,"gesture","move",this.element),e.ds=e.scale-this.gesture.scale,this.target.fire(e),this.gesture.prevAngle=e.angle,this.gesture.prevDistance=e.distance,1/0===e.scale||null===e.scale||void 0===e.scale||isNaN(e.scale)||(this.gesture.scale=e.scale),e},pointerHold:function(t,e,i){this.collectEventTargets(t,e,i,"hold")},pointerUp:function(t,e,i,n){var r=this.mouse?0:ae(this.pointerIds,b(t));clearTimeout(this.holdTimers[r]),this.collectEventTargets(t,e,i,"up"),this.collectEventTargets(t,e,i,"tap"),this.pointerEnd(t,e,i,n),this.removePointer(t)},pointerCancel:function(t,e,i,n){var r=this.mouse?0:ae(this.pointerIds,b(t));clearTimeout(this.holdTimers[r]),this.collectEventTargets(t,e,i,"cancel"),this.pointerEnd(t,e,i,n),this.removePointer(t)},ie8Dblclick:function(t,e,i){this.prevTap&&e.clientX===this.prevTap.clientX&&e.clientY===this.prevTap.clientY&&i===this.prevTap.target&&(this.downTargets[0]=i,this.downTimes[0]=(new Date).getTime(),this.collectEventTargets(t,e,i,"tap"))},pointerEnd:function(t,e,i,n){var r,s=this.target,o=s&&s.options,a=o&&this.prepared.name&&o[this.prepared.name].inertia,h=this.inertiaStatus;if(this.interacting()){if(h.active)return;var l,u,c=(new Date).getTime(),f=!1,v=!1,g=!1,m=j(s,this.prepared.name)&&o[this.prepared.name].snap.endOnly,y=N(s,this.prepared.name)&&o[this.prepared.name].restrict.endOnly,x=0,b=0;if(l=this.dragging?"x"===o.drag.axis?Math.abs(this.pointerDelta.client.vx):"y"===o.drag.axis?Math.abs(this.pointerDelta.client.vy):this.pointerDelta.client.speed:this.pointerDelta.client.speed,f=a&&a.enabled&&"gesture"!==this.prepared.name&&e!==h.startEvent,v=f&&c-this.curCoords.timeStamp<50&&l>a.minSpeed&&l>a.endSpeed,f&&!v&&(m||y)){var E={};E.snap=E.restrict=E,m&&(this.setSnapping(this.curCoords.page,E),E.locked&&(x+=E.dx,b+=E.dy)),y&&(this.setRestriction(this.curCoords.page,E),E.restricted&&(x+=E.dx,b+=E.dy)),(x||b)&&(g=!0)}if(v||g){if(d(h.upCoords,this.curCoords),this.pointers[0]=h.startEvent=u=new L(this,e,this.prepared.name,"inertiastart",this.element),h.t0=c,s.fire(h.startEvent),v){h.vx0=this.pointerDelta.client.vx,h.vy0=this.pointerDelta.client.vy,h.v0=l,this.calcInertia(h);var w,S=p({},this.curCoords.page),T=A(s,this.element);if(S.x=S.x+h.xe-T.x,S.y=S.y+h.ye-T.y,w={useStatusXY:!0,x:S.x,y:S.y,dx:0,dy:0,snap:null},w.snap=w,x=b=0,m){var _=this.setSnapping(this.curCoords.page,w);_.locked&&(x+=_.dx,b+=_.dy)}if(y){var D=this.setRestriction(this.curCoords.page,w);D.restricted&&(x+=D.dx,b+=D.dy)}h.modifiedXe+=x,h.modifiedYe+=b,h.i=Ue(this.boundInertiaFrame)}else h.smoothEnd=!0,h.xe=x,h.ye=b,h.sx=h.sy=0,h.i=Ue(this.boundSmoothEndFrame);return void(h.active=!0)}(m||y)&&this.pointerMove(t,e,i,n,!0)}if(this.dragging){r=new L(this,e,"drag","end",this.element);var C=this.element,z=this.getDrop(r,C);this.dropTarget=z.dropzone,this.dropElement=z.element;var M=this.getDropEvents(e,r);M.leave&&this.prevDropTarget.fire(M.leave),M.enter&&this.dropTarget.fire(M.enter),M.drop&&this.dropTarget.fire(M.drop),M.deactivate&&this.fireActiveDrops(M.deactivate),s.fire(r)}else this.resizing?(r=new L(this,e,"resize","end",this.element),s.fire(r)):this.gesturing&&(r=new L(this,e,"gesture","end",this.element),s.fire(r));this.stop(e)},collectDrops:function(t){var e,n=[],r=[];for(t=t||this.element,e=0;e<Te.length;e++)if(Te[e].options.drop.enabled){var s=Te[e],o=s.options.drop.accept;if(!(i(o)&&o!==t||u(o)&&!le(t,o)))for(var a=s.selector?s._context.querySelectorAll(s.selector):[s._element],h=0,l=a.length;l>h;h++){var c=a[h];c!==t&&(n.push(s),r.push(c))}}return{dropzones:n,elements:r}},fireActiveDrops:function(t){var e,i,n,r;for(e=0;e<this.activeDrops.dropzones.length;e++)i=this.activeDrops.dropzones[e],n=this.activeDrops.elements[e],n!==r&&(t.target=n,i.fire(t)),r=n},setActiveDrops:function(t){var e=this.collectDrops(t,!0);this.activeDrops.dropzones=e.dropzones,this.activeDrops.elements=e.elements,this.activeDrops.rects=[];for(var i=0;i<this.activeDrops.dropzones.length;i++)this.activeDrops.rects[i]=this.activeDrops.dropzones[i].getRect(this.activeDrops.elements[i])},getDrop:function(t,e){var i=[];De&&this.setActiveDrops(e);for(var n=0;n<this.activeDrops.dropzones.length;n++){var r=this.activeDrops.dropzones[n],s=this.activeDrops.elements[n],o=this.activeDrops.rects[n];i.push(r.dropCheck(this.pointers[0],this.target,e,s,o)?s:null)}var a=U(i),h=this.activeDrops.dropzones[a]||null,l=this.activeDrops.elements[a]||null;return{dropzone:h,element:l}},getDropEvents:function(t,e){var i={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return this.dropElement!==this.prevDropElement&&(this.prevDropTarget&&(i.leave={target:this.prevDropElement,dropzone:this.prevDropTarget,relatedTarget:e.target,draggable:e.interactable,dragEvent:e,interaction:this,timeStamp:e.timeStamp,type:"dragleave"},e.dragLeave=this.prevDropElement,e.prevDropzone=this.prevDropTarget),this.dropTarget&&(i.enter={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:e.target,draggable:e.interactable,dragEvent:e,interaction:this,timeStamp:e.timeStamp,type:"dragenter"},e.dragEnter=this.dropElement,e.dropzone=this.dropTarget)),"dragend"===e.type&&this.dropTarget&&(i.drop={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:e.target,draggable:e.interactable,dragEvent:e,interaction:this,timeStamp:e.timeStamp,type:"drop"}),"dragstart"===e.type&&(i.activate={target:null,dropzone:null,relatedTarget:e.target,draggable:e.interactable,dragEvent:e,interaction:this,timeStamp:e.timeStamp,type:"dropactivate"}),"dragend"===e.type&&(i.deactivate={target:null,dropzone:null,relatedTarget:e.target,draggable:e.interactable,dragEvent:e,interaction:this,timeStamp:e.timeStamp,type:"dropdeactivate"}),"dragmove"===e.type&&this.dropTarget&&(i.move={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:e.target,draggable:e.interactable,dragEvent:e,interaction:this,dragmove:e,timeStamp:e.timeStamp,type:"dropmove"},e.dropzone=this.dropTarget),i},currentAction:function(){return this.dragging&&"drag"||this.resizing&&"resize"||this.gesturing&&"gesture"||null},interacting:function(){return this.dragging||this.resizing||this.gesturing},clearTargets:function(){this.target&&!this.target.selector&&(this.target=this.element=null),this.dropTarget=this.dropElement=this.prevDropTarget=this.prevDropElement=null},stop:function(t){if(this.interacting()){Ae.stop(),this.matches=[],this.matchElements=[];var e=this.target;e.options.styleCursor&&(e._doc.documentElement.style.cursor=""),t&&a(t.preventDefault)&&this.checkAndPreventDefault(t,e,this.element),this.dragging&&(this.activeDrops.dropzones=this.activeDrops.elements=this.activeDrops.rects=null),this.clearTargets()}this.pointerIsDown=this.snapStatus.locked=this.dragging=this.resizing=this.gesturing=!1,this.prepared.name=this.prevEvent=null,this.inertiaStatus.resumeDx=this.inertiaStatus.resumeDy=0;for(var i=0;i<this.pointers.length;i++)-1===ae(this.pointerIds,b(this.pointers[i]))&&this.pointers.splice(i,1);_e.length>1&&_e.splice(ae(_e,this),1)},inertiaFrame:function(){var t=this.inertiaStatus,e=this.target.options[this.prepared.name].inertia,i=e.resistance,n=(new Date).getTime()/1e3-t.t0;if(n<t.te){var r=1-(Math.exp(-i*n)-t.lambda_v0)/t.one_ve_v0;if(t.modifiedXe===t.xe&&t.modifiedYe===t.ye)t.sx=t.xe*r,t.sy=t.ye*r;else{var s=k(0,0,t.xe,t.ye,t.modifiedXe,t.modifiedYe,r);t.sx=s.x,t.sy=s.y}this.pointerMove(t.startEvent,t.startEvent),t.i=Ue(this.boundInertiaFrame)}else t.sx=t.modifiedXe,t.sy=t.modifiedYe,this.pointerMove(t.startEvent,t.startEvent),t.active=!1,this.pointerEnd(t.startEvent,t.startEvent)},smoothEndFrame:function(){var t=this.inertiaStatus,e=(new Date).getTime()-t.t0,i=this.target.options[this.prepared.name].inertia.smoothEndDuration;i>e?(t.sx=P(e,0,t.xe,i),t.sy=P(e,0,t.ye,i),this.pointerMove(t.startEvent,t.startEvent),t.i=Ue(this.boundSmoothEndFrame)):(t.sx=t.xe,t.sy=t.ye,this.pointerMove(t.startEvent,t.startEvent),t.active=!1,t.smoothEnd=!1,this.pointerEnd(t.startEvent,t.startEvent))},addPointer:function(t){var e=b(t),i=this.mouse?0:ae(this.pointerIds,e);return-1===i&&(i=this.pointerIds.length),this.pointerIds[i]=e,this.pointers[i]=t,i},removePointer:function(t){var e=b(t),i=this.mouse?0:ae(this.pointerIds,e);-1!==i&&(this.interacting()||this.pointers.splice(i,1),this.pointerIds.splice(i,1),this.downTargets.splice(i,1),this.downTimes.splice(i,1),this.holdTimers.splice(i,1))},recordPointer:function(t){if(!this.inertiaStatus.active){var e=this.mouse?0:ae(this.pointerIds,b(t));-1!==e&&(this.pointers[e]=t)}},collectEventTargets:function(t,e,n,r){function s(t,e,s){var o=pe?s.querySelectorAll(e):void 0;t._iEvents[r]&&i(l)&&R(t,l)&&!X(t,l,n)&&Y(t,l,n)&&le(l,e,o)&&(a.push(t),h.push(l))}var o=this.mouse?0:ae(this.pointerIds,b(t));if("tap"!==r||!this.pointerWasMoved&&this.downTargets[o]&&this.downTargets[o]===n){for(var a=[],h=[],l=n;l;)ie.isSet(l)&&ie(l)._iEvents[r]&&(a.push(ie(l)),h.push(l)),Te.forEachSelector(s),l=I(l);
(a.length||"tap"===r)&&this.firePointers(t,e,n,a,h,r)}},firePointers:function(t,e,i,n,r,s){var o,a,h,l=this.mouse?0:ae(b(t)),c={};for("doubletap"===s?c=t:(p(c,e),e!==t&&p(c,t),c.preventDefault=Q,c.stopPropagation=L.prototype.stopPropagation,c.stopImmediatePropagation=L.prototype.stopImmediatePropagation,c.interaction=this,c.timeStamp=(new Date).getTime(),c.originalEvent=e,c.type=s,c.pointerId=b(t),c.pointerType=this.mouse?"mouse":ke?u(t.pointerType)?t.pointerType:[,,"touch","pen","mouse"][t.pointerType]:"touch"),"tap"===s&&(c.dt=c.timeStamp-this.downTimes[l],a=c.timeStamp-this.tapTime,h=!!(this.prevTap&&"doubletap"!==this.prevTap.type&&this.prevTap.target===c.target&&500>a),c["double"]=h,this.tapTime=c.timeStamp),o=0;o<n.length&&(c.currentTarget=r[o],c.interactable=n[o],n[o].fire(c),!(c.immediatePropagationStopped||c.propagationStopped&&r[o+1]!==c.currentTarget));o++);if(h){var d={};p(d,c),d.dt=a,d.type="doubletap",this.collectEventTargets(d,e,i,"doubletap"),this.prevTap=d}else"tap"===s&&(this.prevTap=c)},validateSelector:function(t,e,i){for(var n=0,r=e.length;r>n;n++){var s=e[n],o=i[n],a=Z(s.getAction(t,this,o),s);if(a&&H(s,o,a))return this.target=s,this.element=o,a}},setSnapping:function(t,e){var i,n,r,s=this.target.options[this.prepared.name].snap,o=[];if(e=e||this.snapStatus,e.useStatusXY)n={x:e.x,y:e.y};else{var l=A(this.target,this.element);n=p({},t),n.x-=l.x,n.y-=l.y}e.realX=n.x,e.realY=n.y,n.x=n.x-this.inertiaStatus.resumeDx,n.y=n.y-this.inertiaStatus.resumeDy;for(var u=s.targets?s.targets.length:0,c=0;c<this.snapOffsets.length;c++){var d={x:n.x-this.snapOffsets[c].x,y:n.y-this.snapOffsets[c].y};for(r=0;u>r;r++)i=a(s.targets[r])?s.targets[r](d.x,d.y,this):s.targets[r],i&&o.push({x:h(i.x)?i.x+this.snapOffsets[c].x:d.x,y:h(i.y)?i.y+this.snapOffsets[c].y:d.y,range:h(i.range)?i.range:s.range})}var f={target:null,inRange:!1,distance:0,range:0,dx:0,dy:0};for(r=0,u=o.length;u>r;r++){i=o[r];var v=i.range,g=i.x-n.x,m=i.y-n.y,y=Ee(g,m),x=v>=y;1/0===v&&f.inRange&&1/0!==f.range&&(x=!1),(!f.target||(x?f.inRange&&1/0!==v?y/v<f.distance/f.range:1/0===v&&1/0!==f.range||y<f.distance:!f.inRange&&y<f.distance))&&(1/0===v&&(x=!0),f.target=i,f.distance=y,f.range=v,f.inRange=x,f.dx=g,f.dy=m,e.range=v)}var b;return f.target?(b=e.snappedX!==f.target.x||e.snappedY!==f.target.y,e.snappedX=f.target.x,e.snappedY=f.target.y):(b=!0,e.snappedX=0/0,e.snappedY=0/0),e.dx=f.dx,e.dy=f.dy,e.changed=b||f.inRange&&!e.locked,e.locked=f.inRange,e},setRestriction:function(t,e){var n,r=this.target,s=r&&r.options[this.prepared.name].restrict,o=s&&s.restriction;if(!o)return e;e=e||this.restrictStatus,n=n=e.useStatusXY?{x:e.x,y:e.y}:p({},t),e.snap&&e.snap.locked&&(n.x+=e.snap.dx||0,n.y+=e.snap.dy||0),n.x-=this.inertiaStatus.resumeDx,n.y-=this.inertiaStatus.resumeDy,e.dx=0,e.dy=0,e.restricted=!1;var h,l,c;return u(o)&&(o="parent"===o?I(this.element):"self"===o?r.getRect(this.element):$(this.element,o),!o)?e:(a(o)&&(o=o(n.x,n.y,this.element)),i(o)&&(o=S(o)),h=o,o?"x"in o&&"y"in o?(l=Math.max(Math.min(h.x+h.width-this.restrictOffset.right,n.x),h.x+this.restrictOffset.left),c=Math.max(Math.min(h.y+h.height-this.restrictOffset.bottom,n.y),h.y+this.restrictOffset.top)):(l=Math.max(Math.min(h.right-this.restrictOffset.right,n.x),h.left+this.restrictOffset.left),c=Math.max(Math.min(h.bottom-this.restrictOffset.bottom,n.y),h.top+this.restrictOffset.top)):(l=n.x,c=n.y),e.dx=l-n.x,e.dy=c-n.y,e.changed=e.restrictedX!==l||e.restrictedY!==c,e.restricted=!(!e.dx&&!e.dy),e.restrictedX=l,e.restrictedY=c,e)},checkAndPreventDefault:function(t,e,i){if(e=e||this.target){var n=e.options,r=n.preventDefault;if("auto"===r&&i&&!/^input$|^textarea$/i.test(i.nodeName)){if(/down|start/i.test(t.type)&&"drag"===this.prepared.name&&"xy"!==n.drag.axis)return;if(n[this.prepared.name]&&n[this.prepared.name].manualStart&&!this.interacting())return;return void t.preventDefault()}return"always"===r?void t.preventDefault():void 0}},calcInertia:function(t){var e=this.target.options[this.prepared.name].inertia,i=e.resistance,n=-Math.log(e.endSpeed/t.v0)/i;t.x0=this.prevEvent.pageX,t.y0=this.prevEvent.pageY,t.t0=t.startEvent.timeStamp/1e3,t.sx=t.sy=0,t.modifiedXe=t.xe=(t.vx0-n)/i,t.modifiedYe=t.ye=(t.vy0-n)/i,t.te=n,t.lambda_v0=i/t.v0,t.one_ve_v0=1-e.endSpeed/t.v0},_updateEventTargets:function(t,e){this._eventTarget=t,this._curEventTarget=e}},L.prototype={preventDefault:e,stopImmediatePropagation:function(){this.immediatePropagationStopped=this.propagationStopped=!0},stopPropagation:function(){this.propagationStopped=!0}};for(var We={},Le=["dragStart","dragMove","resizeStart","resizeMove","gestureStart","gestureMove","pointerOver","pointerOut","pointerHover","selectorDown","pointerDown","pointerMove","pointerUp","pointerCancel","pointerEnd","addPointer","removePointer","recordPointer"],Qe=0,Ke=Le.length;Ke>Qe;Qe++){var Ge=Le[Qe];We[Ge]=W(Ge)}Te.indexOfElement=function(t,e){e=e||fe;for(var i=0;i<this.length;i++){var n=this[i];if(n.selector===t&&n._context===e||!n.selector&&n._element===t)return i}return-1},Te.get=function(t,e){return this[this.indexOfElement(t,e&&e.context)]},Te.forEachSelector=function(t){for(var e=0;e<this.length;e++){var i=this[e];if(i.selector){var n=t(i,i.selector,i._context,e,this);if(void 0!==n)return n}}},ne.prototype={setOnEvents:function(t,e){return"drop"===t?(a(e.ondrop)&&(this.ondrop=e.ondrop),a(e.ondropactivate)&&(this.ondropactivate=e.ondropactivate),a(e.ondropdeactivate)&&(this.ondropdeactivate=e.ondropdeactivate),a(e.ondragenter)&&(this.ondragenter=e.ondragenter),a(e.ondragleave)&&(this.ondragleave=e.ondragleave),a(e.ondropmove)&&(this.ondropmove=e.ondropmove)):(t="on"+t,a(e.onstart)&&(this[t+"start"]=e.onstart),a(e.onmove)&&(this[t+"move"]=e.onmove),a(e.onend)&&(this[t+"end"]=e.onend),a(e.oninertiastart)&&(this[t+"inertiastart"]=e.oninertiastart)),this},draggable:function(t){return o(t)?(this.options.drag.enabled=t.enabled===!1?!1:!0,this.setPerAction("drag",t),this.setOnEvents("drag",t),/^x$|^y$|^xy$/.test(t.axis)?this.options.drag.axis=t.axis:null===t.axis&&delete this.options.drag.axis,this):l(t)?(this.options.drag.enabled=t,this):this.options.drag},setPerAction:function(t,e){for(var i in e)i in ze[t]&&(o(e[i])?(this.options[t][i]=p(this.options[t][i]||{},e[i]),o(ze.perAction[i])&&"enabled"in ze.perAction[i]&&(this.options[t][i].enabled=e[i].enabled===!1?!1:!0)):l(e[i])&&o(ze.perAction[i])?this.options[t][i].enabled=e[i]:void 0!==e[i]&&(this.options[t][i]=e[i]))},dropzone:function(t){return o(t)?(this.options.drop.enabled=t.enabled===!1?!1:!0,this.setOnEvents("drop",t),this.accept(t.accept),/^(pointer|center)$/.test(t.overlap)?this.options.drop.overlap=t.overlap:h(t.overlap)&&(this.options.drop.overlap=Math.max(Math.min(1,t.overlap),0)),this):l(t)?(this.options.drop.enabled=t,this):this.options.drop},dropCheck:function(t,e,i,n,r){var s=!1;if(!(r=r||this.getRect(n)))return this.options.dropChecker?this.options.dropChecker(t,s,this,n,e,i):!1;var o=this.options.drop.overlap;if("pointer"===o){var a,l,u=m(t),c=A(e,i);u.x+=c.x,u.y+=c.y,a=u.x>r.left&&u.x<r.right,l=u.y>r.top&&u.y<r.bottom,s=a&&l}var p=e.getRect(i);if("center"===o){var d=p.left+p.width/2,f=p.top+p.height/2;s=d>=r.left&&d<=r.right&&f>=r.top&&f<=r.bottom}if(h(o)){var v=Math.max(0,Math.min(r.right,p.right)-Math.max(r.left,p.left))*Math.max(0,Math.min(r.bottom,p.bottom)-Math.max(r.top,p.top)),g=v/(p.width*p.height);s=g>=o}return this.options.dropChecker&&(s=this.options.dropChecker(t,s,this,n,e,i)),s},dropChecker:function(t){return a(t)?(this.options.dropChecker=t,this):null===t?(delete this.options.getRect,this):this.options.dropChecker},accept:function(t){return i(t)?(this.options.drop.accept=t,this):c(t)?(this.options.drop.accept=t,this):null===t?(delete this.options.drop.accept,this):this.options.drop.accept},resizable:function(t){return o(t)?(this.options.resize.enabled=t.enabled===!1?!1:!0,this.setPerAction("resize",t),this.setOnEvents("resize",t),/^x$|^y$|^xy$/.test(t.axis)?this.options.resize.axis=t.axis:null===t.axis&&(this.options.resize.axis=ze.resize.axis),l(t.square)&&(this.options.resize.square=t.square),this):l(t)?(this.options.resize.enabled=t,this):this.options.resize},squareResize:function(t){return l(t)?(this.options.resize.square=t,this):null===t?(delete this.options.resize.square,this):this.options.resize.square},gesturable:function(t){return o(t)?(this.options.gesture.enabled=t.enabled===!1?!1:!0,this.setPerAction("gesture",t),this.setOnEvents("gesture",t),this):l(t)?(this.options.gesture.enabled=t,this):this.options.gesture},autoScroll:function(t){return o(t)?t=p({actions:["drag","resize"]},t):l(t)&&(t={actions:["drag","resize"],enabled:t}),this.setOptions("autoScroll",t)},snap:function(t){var e=this.setOptions("snap",t);return e===this?this:e.drag},setOptions:function(t,e){var i,n=e&&s(e.actions)?e.actions:["drag"];if(o(e)||l(e)){for(i=0;i<n.length;i++){var r=/resize/.test(n[i])?"resize":n[i];if(o(this.options[r])){var a=this.options[r][t];o(e)?(p(a,e),a.enabled=e.enabled===!1?!1:!0,"snap"===t&&("grid"===a.mode?a.targets=[ie.createSnapGrid(p({offset:a.gridOffset||{x:0,y:0}},a.grid||{}))]:"anchor"===a.mode?a.targets=a.anchors:"path"===a.mode&&(a.targets=a.paths),"elementOrigin"in e&&(a.relativePoints=[e.elementOrigin]))):l(e)&&(a.enabled=e)}}return this}var h={},u=["drag","resize","gesture"];for(i=0;i<u.length;i++)t in ze[u[i]]&&(h[u[i]]=this.options[u[i]][t]);return h},inertia:function(t){var e=this.setOptions("inertia",t);return e===this?this:e.drag},getAction:function(t,e,i){var n=this.defaultActionChecker(t,e,i);return this.options.actionChecker?this.options.actionChecker(t,n,this,i,e):n},defaultActionChecker:J,actionChecker:function(t){return a(t)?(this.options.actionChecker=t,this):null===t?(delete this.options.actionChecker,this):this.options.actionChecker},getRect:function(t){return t=t||this._element,this.selector&&!i(t)&&(t=this._context.querySelector(this.selector)),S(t)},rectChecker:function(t){return a(t)?(this.getRect=t,this):null===t?(delete this.options.getRect,this):this.getRect},styleCursor:function(t){return l(t)?(this.options.styleCursor=t,this):null===t?(delete this.options.styleCursor,this):this.options.styleCursor},preventDefault:function(t){return/^(always|never|auto)$/.test(t)?(this.options.preventDefault=t,this):l(t)?(this.options.preventDefault=t?"always":"never",this):this.options.preventDefault},origin:function(t){return c(t)?(this.options.origin=t,this):o(t)?(this.options.origin=t,this):this.options.origin},deltaSource:function(t){return"page"===t||"client"===t?(this.options.deltaSource=t,this):this.options.deltaSource},restrict:function(t){if(!o(t))return this.setOptions("restrict",t);for(var e,i=["drag","resize","gesture"],n=0;n<i.length;n++){var r=i[n];if(r in t){var s=p({actions:[r],restriction:t[r]},t);e=this.setOptions("restrict",s)}}return e},context:function(){return this._context},_context:fe,ignoreFrom:function(t){return c(t)?(this.options.ignoreFrom=t,this):i(t)?(this.options.ignoreFrom=t,this):this.options.ignoreFrom},allowFrom:function(t){return c(t)?(this.options.allowFrom=t,this):i(t)?(this.options.allowFrom=t,this):this.options.allowFrom},element:function(){return this._element},fire:function(t){if(!t||!t.type||!he(Fe,t.type))return this;var e,i,n,r="on"+t.type,s="";if(t.type in this._iEvents)for(e=this._iEvents[t.type],i=0,n=e.length;n>i&&!t.immediatePropagationStopped;i++)s=e[i].name,e[i](t);if(a(this[r])&&(s=this[r].name,this[r](t)),t.type in je&&(e=je[t.type]))for(i=0,n=e.length;n>i&&!t.immediatePropagationStopped;i++)s=e[i].name,e[i](t);return this},on:function(t,e,i){var n;if(u(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),s(t)){for(n=0;n<t.length;n++)this.on(t[n],e,i);return this}if(o(t)){for(var r in t)this.on(r,t[r],e);return this}if("wheel"===t&&(t=Ye),i=i?!0:!1,he(Fe,t))t in this._iEvents?this._iEvents[t].push(e):this._iEvents[t]=[e];else if(this.selector){if(!Ce[t])for(Ce[t]={selectors:[],contexts:[],listeners:[]},n=0;n<Se.length;n++)Ve.add(Se[n],t,te),Ve.add(Se[n],t,ee,!0);var a,h=Ce[t];for(a=h.selectors.length-1;a>=0&&(h.selectors[a]!==this.selector||h.contexts[a]!==this._context);a--);-1===a&&(a=h.selectors.length,h.selectors.push(this.selector),h.contexts.push(this._context),h.listeners.push([])),h.listeners[a].push([e,i])}else Ve.add(this._element,t,e,i);return this},off:function(t,e,i){var n;if(u(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),s(t)){for(n=0;n<t.length;n++)this.off(t[n],e,i);return this}if(o(t)){for(var r in t)this.off(r,t[r],e);return this}var a,h=-1;if(i=i?!0:!1,"wheel"===t&&(t=Ye),he(Fe,t))a=this._iEvents[t],a&&-1!==(h=ae(a,e))&&this._iEvents[t].splice(h,1);else if(this.selector){var l=Ce[t],c=!1;if(!l)return this;for(h=l.selectors.length-1;h>=0;h--)if(l.selectors[h]===this.selector&&l.contexts[h]===this._context){var p=l.listeners[h];for(n=p.length-1;n>=0;n--){var d=p[n][0],f=p[n][1];if(d===e&&f===i){p.splice(n,1),p.length||(l.selectors.splice(h,1),l.contexts.splice(h,1),l.listeners.splice(h,1),Ve.remove(this._context,t,te),Ve.remove(this._context,t,ee,!0),l.selectors.length||(Ce[t]=null)),c=!0;break}}if(c)break}}else Ve.remove(this._element,t,e,i);return this},set:function(t){o(t)||(t={}),this.options=p({},ze.base);var e,i=["drag","drop","resize","gesture"],n=["draggable","dropzone","resizable","gesturable"],r=p(p({},ze.perAction),t[s]||{});for(e=0;e<i.length;e++){var s=i[e];this.options[s]=p({},ze[s]),this.setPerAction(s,r),this[n[e]](t[s])}var a=["accept","actionChecker","allowFrom","deltaSource","dropChecker","ignoreFrom","origin","preventDefault","rectChecker"];for(e=0,Ke=a.length;Ke>e;e++){var h=a[e];this.options[h]=ze.base[h],h in t&&this[h](t[h])}return this},unset:function(){if(Ve.remove(this,"all"),u(this.selector))for(var t in Ce)for(var e=Ce[t],i=0;i<e.selectors.length;i++){e.selectors[i]===this.selector&&e.contexts[i]===this._context&&(e.selectors.splice(i,1),e.contexts.splice(i,1),e.listeners.splice(i,1),e.selectors.length||(Ce[t]=null)),Ve.remove(this._context,t,te),Ve.remove(this._context,t,ee,!0);break}else Ve.remove(this,"all"),this.options.styleCursor&&(this._element.style.cursor="");return this.dropzone(!1),Te.splice(ae(Te,this),1),ie}},ne.prototype.snap=re(ne.prototype.snap,"Interactable#snap is deprecated. See the new documentation for snapping at http://interactjs.io/docs/snapping"),ne.prototype.restrict=re(ne.prototype.restrict,"Interactable#restrict is deprecated. See the new documentation for resticting at http://interactjs.io/docs/restriction"),ne.prototype.inertia=re(ne.prototype.inertia,"Interactable#inertia is deprecated. See the new documentation for inertia at http://interactjs.io/docs/inertia"),ne.prototype.autoScroll=re(ne.prototype.autoScroll,"Interactable#autoScroll is deprecated. See the new documentation for autoScroll at http://interactjs.io/docs/#autoscroll"),ie.isSet=function(t,e){return-1!==Te.indexOfElement(t,e&&e.context)},ie.on=function(t,e,i){if(u(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),s(t)){for(var n=0;n<t.length;n++)ie.on(t[n],e,i);return ie}if(o(t)){for(var r in t)ie.on(r,t[r],e);return ie}return he(Fe,t)?je[t]?je[t].push(e):je[t]=[e]:Ve.add(fe,t,e,i),ie},ie.off=function(t,e,i){if(u(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),s(t)){for(var n=0;n<t.length;n++)ie.off(t[n],e,i);return ie}if(o(t)){for(var r in t)ie.off(r,t[r],e);return ie}if(he(Fe,t)){var a;t in je&&-1!==(a=ae(je[t],e))&&je[t].splice(a,1)}else Ve.remove(fe,t,e,i);return ie},ie.enableDragging=re(function(t){return null!==t&&void 0!==t?(Xe.drag=t,ie):Xe.drag},"interact.enableDragging is deprecated and will soon be removed."),ie.enableResizing=re(function(t){return null!==t&&void 0!==t?(Xe.resize=t,ie):Xe.resize},"interact.enableResizing is deprecated and will soon be removed."),ie.enableGesturing=re(function(t){return null!==t&&void 0!==t?(Xe.gesture=t,ie):Xe.gesture},"interact.enableGesturing is deprecated and will soon be removed."),ie.eventTypes=Fe,ie.debug=function(){var t=_e[0]||new B;return{interactions:_e,target:t.target,dragging:t.dragging,resizing:t.resizing,gesturing:t.gesturing,prepared:t.prepared,matches:t.matches,matchElements:t.matchElements,prevCoords:t.prevCoords,startCoords:t.startCoords,pointerIds:t.pointerIds,pointers:t.pointers,addPointer:We.addPointer,removePointer:We.removePointer,recordPointer:We.recordPointer,snap:t.snapStatus,restrict:t.restrictStatus,inertia:t.inertiaStatus,downTime:t.downTimes[0],downEvent:t.downEvent,downPointer:t.downPointer,prevEvent:t.prevEvent,Interactable:ne,interactables:Te,pointerIsDown:t.pointerIsDown,defaultOptions:ze,defaultActionChecker:J,actionCursors:Re,dragMove:We.dragMove,resizeMove:We.resizeMove,gestureMove:We.gestureMove,pointerUp:We.pointerUp,pointerDown:We.pointerDown,pointerMove:We.pointerMove,pointerHover:We.pointerHover,events:Ve,globalEvents:je,delegatedEvents:Ce}},ie.getTouchAverage=_,ie.getTouchBBox=D,ie.getTouchDistance=C,ie.getTouchAngle=z,ie.getElementRect=S,ie.matchesSelector=le,ie.closest=$,ie.margin=function(t){return h(t)?(Pe=t,ie):Pe},ie.supportsTouch=function(){return Me},ie.supportsPointerEvent=function(){return ke},ie.stop=function(t){for(var e=_e.length-1;e>0;e--)_e[e].stop(t);return ie},ie.dynamicDrop=function(t){return l(t)?(De=t,ie):De},ie.pointerMoveTolerance=function(t){return h(t)?(Oe=t,this):Oe},ie.maxInteractions=function(t){return h(t)?(Ie=t,this):Ie},ie.createSnapGrid=function(t){return function(e,i){var n=0,r=0;o(t.offset)&&(n=t.offset.x,r=t.offset.y);var s=Math.round((e-n)/t.x),a=Math.round((i-r)/t.y),h=s*t.x+n,l=a*t.y+r;return{x:h,y:l,range:t.range}}},oe(fe),He in Element.prototype&&a(Element.prototype[He])||(pe=function(t,e,i){i=i||t.parentNode.querySelectorAll(e);for(var n=0,r=i.length;r>n;n++)if(i[n]===t)return!0;return!1}),function(){for(var e=0,i=["ms","moz","webkit","o"],n=0;n<i.length&&!t.requestAnimationFrame;++n)Ue=t[i[n]+"RequestAnimationFrame"],Be=t[i[n]+"CancelAnimationFrame"]||t[i[n]+"CancelRequestAnimationFrame"];Ue||(Ue=function(t){var i=(new Date).getTime(),n=Math.max(0,16-(i-e)),r=setTimeout(function(){t(i+n)},n);return e=i+n,r}),Be||(Be=function(t){clearTimeout(t)})}(),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=ie),exports.interact=ie):"function"==typeof define&&define.amd?define("interact",function(){return ie}):t.interact=ie}(window),function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,r){t.Backbone=e(t,r,i,n)});else if("undefined"!=typeof exports){var i=require("underscore");e(t,exports,i)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,i,n){{var r=t.Backbone,s=[],o=(s.push,s.slice);s.splice}e.VERSION="1.1.2",e.$=n,e.noConflict=function(){return t.Backbone=r,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=e.Events={on:function(t,e,i){if(!l(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,n){if(!l(this,"once",t,[e,n])||!e)return this;var r=this,s=i.once(function(){r.off(t,s),e.apply(this,arguments)});return s._callback=e,this.on(t,s,n)},off:function(t,e,n){var r,s,o,a,h,u,c,p;if(!this._events||!l(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(a=t?[t]:i.keys(this._events),h=0,u=a.length;u>h;h++)if(t=a[h],o=this._events[t]){if(this._events[t]=r=[],e||n)for(c=0,p=o.length;p>c;c++)s=o[c],(e&&e!==s.callback&&e!==s.callback._callback||n&&n!==s.context)&&r.push(s);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!l(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&u(i,e),n&&u(n,arguments),this},stopListening:function(t,e,n){var r=this._listeningTo;if(!r)return this;var s=!e&&!n;n||"object"!=typeof e||(n=this),t&&((r={})[t._listenId]=t);for(var o in r)t=r[o],t.off(e,n,this),(s||i.isEmpty(t._events))&&delete this._listeningTo[o];return this}},h=/\s+/,l=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var r in i)t[e].apply(t,[r,i[r]].concat(n));return!1}if(h.test(i)){for(var s=i.split(h),o=0,a=s.length;a>o;o++)t[e].apply(t,[s[o]].concat(n));return!1}return!0},u=function(t,e){var i,n=-1,r=t.length,s=e[0],o=e[1],a=e[2];switch(e.length){case 0:for(;++n<r;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<r;)(i=t[n]).callback.call(i.ctx,s);return;case 2:for(;++n<r;)(i=t[n]).callback.call(i.ctx,s,o);return;case 3:for(;++n<r;)(i=t[n]).callback.call(i.ctx,s,o,a);return;default:for(;++n<r;)(i=t[n]).callback.apply(i.ctx,e);return}},c={listenTo:"on",listenToOnce:"once"};i.each(c,function(t,e){a[e]=function(e,n,r){var s=this._listeningTo||(this._listeningTo={}),o=e._listenId||(e._listenId=i.uniqueId("l"));return s[o]=e,r||"object"!=typeof n||(r=this),e[t](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,i.extend(e,a);var p=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var r,s,o,a,h,l,u,c;if(null==t)return this;if("object"==typeof t?(s=t,n=e):(s={})[t]=e,n||(n={}),!this._validate(s,n))return!1;o=n.unset,h=n.silent,a=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=i.clone(this.attributes),this.changed={}),c=this.attributes,u=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(r in s)e=s[r],i.isEqual(c[r],e)||a.push(r),i.isEqual(u[r],e)?delete this.changed[r]:this.changed[r]=e,o?delete c[r]:c[r]=e;if(!h){a.length&&(this._pending=n);for(var p=0,d=a.length;d>p;p++)this.trigger("change:"+a[p],this,c[a[p]],n)}if(l)return this;if(!h)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):!1;var e,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var s in t)i.isEqual(r[s],e=t[s])||((n||(n={}))[s]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(n&&n(e,i,t),void e.trigger("sync",e,i,t)):!1},X(this,t),this.sync("read",this,t)},save:function(t,e,n){var r,s,o,a=this.attributes;if(null==t||"object"==typeof t?(r=t,n=e):(r={})[t]=e,n=i.extend({validate:!0},n),r&&!n.wait){if(!this.set(r,n))return!1}else if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=i.extend({},a,r)),void 0===n.parse&&(n.parse=!0);var h=this,l=n.success;return n.success=function(t){h.attributes=a;var e=h.parse(t,n);return n.wait&&(e=i.extend(r||{},e)),i.isObject(e)&&!h.set(e,n)?!1:(l&&l(h,t,n),void h.trigger("sync",h,t,n))},X(this,n),s=this.isNew()?"create":n.patch?"patch":"update","patch"===s&&(n.attrs=r),o=this.sync(s,this,n),r&&n.wait&&(this.attributes=a),o},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,r=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&r(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;X(this,t);var s=this.sync("delete",this,t);return t.wait||r(),s},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||R();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1):!0}});var d=["keys","values","pairs","invert","pick","omit"];i.each(d,function(t){p.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}});var f=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},v={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};i.extend(f.prototype,a,{model:p,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,g))},remove:function(t,e){var n=!i.isArray(t);t=n?[t]:i.clone(t),e||(e={});var r,s,o,a;for(r=0,s=t.length;s>r;r++)a=t[r]=this.get(t[r]),a&&(delete this._byId[a.id],delete this._byId[a.cid],o=this.indexOf(a),this.models.splice(o,1),this.length--,e.silent||(e.index=o,a.trigger("remove",a,this,e)),this._removeReference(a,e));return n?t[0]:t},set:function(t,e){e=i.defaults({},e,v),e.parse&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:i.clone(t);var r,s,o,a,h,l,u,c=e.at,d=this.model,f=this.comparator&&null==c&&e.sort!==!1,g=i.isString(this.comparator)?this.comparator:null,m=[],y=[],x={},b=e.add,E=e.merge,w=e.remove,S=!f&&b&&w?[]:!1;for(r=0,s=t.length;s>r;r++){if(h=t[r]||{},o=h instanceof p?a=h:h[d.prototype.idAttribute||"id"],l=this.get(o))w&&(x[l.cid]=!0),E&&(h=h===a?a.attributes:h,e.parse&&(h=l.parse(h,e)),l.set(h,e),f&&!u&&l.hasChanged(g)&&(u=!0)),t[r]=l;else if(b){if(a=t[r]=this._prepareModel(h,e),!a)continue;m.push(a),this._addReference(a,e)}a=l||a,!S||!a.isNew()&&x[a.id]||S.push(a),x[a.id]=!0}if(w){for(r=0,s=this.length;s>r;++r)x[(a=this.models[r]).cid]||y.push(a);y.length&&this.remove(y,e)}if(m.length||S&&S.length)if(f&&(u=!0),this.length+=m.length,null!=c)for(r=0,s=m.length;s>r;r++)this.models.splice(c+r,0,m[r]);else{S&&(this.models.length=0);var T=S||m;for(r=0,s=T.length;s>r;r++)this.models.push(T[r])}if(u&&this.sort({silent:!0}),!e.silent){for(r=0,s=m.length;s>r;r++)(a=m[r]).trigger("add",a,this,e);(u||S&&S.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,r=this.models.length;r>n;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return o.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var r=t.reset?"reset":"set";n[r](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},X(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,r=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),r&&r(t,i,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof p)return t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_addReference:function(t){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var m=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(m,function(t){f.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});var y=["groupBy","countBy","sortBy","indexBy"];i.each(y,function(t){f.prototype[t]=function(e,n){var r=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,r,n)}});var x=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,E)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,E=["model","collection","el","id","attributes","className","tagName","events"];i.extend(x.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[t[e]]),n){var r=e.match(b),s=r[1],o=r[2];n=i.bind(n,this),s+=".delegateEvents"+this.cid,""===o?this.$el.on(s,n):this.$el.on(s,o,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className"));var n=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,r){var s=S[t];i.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:s,dataType:"json"};if(r.url||(o.url=i.result(n,"url")||R()),null!=r.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(r.attrs||n.toJSON(r))),r.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),r.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){o.type="POST",r.emulateJSON&&(o.data._method=s);var a=r.beforeSend;r.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",s),a?a.apply(this,arguments):void 0
}}"GET"===o.type||r.emulateJSON||(o.processData=!1),"PATCH"===o.type&&w&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var h=r.xhr=e.ajax(i.extend(o,r));return n.trigger("request",n,h,r),h};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),S={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var T=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},_=/\((.*?)\)/g,D=/(\(\?)?:\w+/g,C=/\*\w+/g,z=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(T.prototype,a,{initialize:function(){},route:function(t,n,r){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(r=n,n=""),r||(r=this[n]);var s=this;return e.history.route(t,function(i){var o=s._extractParameters(t,i);s.execute(r,o),s.trigger.apply(s,["route:"+n].concat(o)),s.trigger("route",n,o),e.history.trigger("route",s,n,o)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(z,"\\$&").replace(_,"(?:$1)?").replace(D,function(t,e){return e?t:"([^/?]+)"}).replace(C,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var A=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,k=/^\/+|\/+$/g,P=/msie [\w.]+/,O=/\/$/,$=/#.*$/;A.started=!1,i.extend(A.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(O,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(M,"")},start:function(t){if(A.started)throw new Error("Backbone.history has already been started");A.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),r=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&&(!r||7>=r);if(this.root=("/"+this.root+"/").replace(k,"/"),s&&this._wantsHashChange){var o=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),A.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!A.started)return!1;e&&e!==!0||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace($,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new A;var I=function(t,e){var n,r=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},i.extend(n,r,e);var s=function(){this.constructor=n};return s.prototype=r.prototype,n.prototype=new s,t&&i.extend(n.prototype,t),n.__super__=r.prototype,n};p.extend=f.extend=T.extend=x.extend=A.extend=I;var R=function(){throw new Error('A "url" property or function must be specified')},X=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}};return e}),function(t,e,i){"use strict";function n(e,i){return this.name=r,this.el=e,this.$el=t(e),this.options=t.extend({},s,i),this.$document=t(this.$el[0].ownerDocument),this.$body=this.$document.find("body"),this.moveTrigger="MSPointerMove touchmove mousemove",this.startTrigger="MSPointerDown touchstart mousedown",this.stopTrigger="MSPointerUp touchend mouseup",this.startTriggerArray=this.startTrigger.split(" "),this.moveTriggerArray=this.moveTrigger.split(" "),this.stopTriggerArray=this.stopTrigger.split(" "),this.stopEvents=[this.stopTrigger,this.options.stopEvents].join(" "),this.$container="window"===this.options.constrainTo?this.$document:this.options.constrainTo&&"parent"!==this.options.constrainTo?t(this.options.constrainTo):this.$el.parent(),this.isPointerEventCompatible()&&this.applyMSDefaults(),this.CSSEaseHash=this.getCSSEaseHash(),this.scale=1,this.started=!1,this.disabled=!1,this.activeDropRegions=[],this.resetVelocityQueue(),this.init(),this}var r="pep",s={initiate:function(){},start:function(){},drag:function(){},stop:function(){},easing:null,rest:function(){},moveTo:!1,callIfNotStarted:["stop","rest"],startThreshold:[0,0],grid:[1,1],debug:!1,activeClass:"pep-active",multiplier:1,velocityMultiplier:2.5,shouldPreventDefault:!0,allowDragEventPropagation:!0,stopEvents:"",hardwareAccelerate:!0,useCSSTranslation:!0,disableSelect:!0,cssEaseString:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",cssEaseDuration:1e3,shouldEase:!0,droppable:!1,droppableActiveClass:"pep-dpa",overlapFunction:!1,constrainTo:!1,removeMargins:!0,place:!0,deferPlacement:!1,axis:null,forceNonCSS3Movement:!1,elementsWithInteraction:"input",revert:!1,revertAfter:"stop",revertIf:function(){return!0},ignoreRightClick:!0,startPos:{left:null,top:null}};n.prototype.init=function(){this.options.debug&&this.buildDebugDiv(),this.options.disableSelect&&this.disableSelect(),this.options.place&&!this.options.deferPlacement&&(this.positionParent(),this.placeObject()),this.ev={},this.pos={},this.subscribe()},n.prototype.subscribe=function(){var t=this;this.onStartEvent=function(e){t.handleStart(e)},this.$el.on(this.startTrigger,this.onStartEvent),this.onStartEventOnElementsWithInteraction=function(t){t.stopPropagation()},this.$el.on(this.startTrigger,this.options.elementsWithInteraction,this.onStartEventOnElementsWithInteraction),this.onStopEvents=function(e){t.handleStop(e)},this.$document.on(this.stopEvents,this.onStopEvents),this.onMoveEvents=function(e){t.moveEvent=e},this.$document.on(this.moveTrigger,this.onMoveEvents)},n.prototype.unsubscribe=function(){this.$el.off(this.startTrigger,this.onStartEvent),this.$el.off(this.startTrigger,this.options.elementsWithInteraction,this.onStartEventOnElementsWithInteraction),this.$document.off(this.stopEvents,this.onStopEvents),this.$document.off(this.moveTrigger,this.onMoveEvents)},n.prototype.handleStart=function(t){var e=this;if(this.isValidMoveEvent(t)&&!this.disabled&&(!this.options.ignoreRightClick||3!==t.which)){this.isPointerEventCompatible()&&t.preventManipulation&&t.preventManipulation(),t=this.normalizeEvent(t),this.options.place&&this.options.deferPlacement&&(this.positionParent(),this.placeObject()),this.log({type:"event",event:t.type}),this.options.hardwareAccelerate&&!this.hardwareAccelerated&&(this.hardwareAccelerate(),this.hardwareAccelerated=!0);var i=this.options.initiate.call(this,t,this);if(i===!1)return;clearTimeout(this.restTimeout),this.$el.addClass(this.options.activeClass),this.removeCSSEasing(),this.startX=this.ev.x=t.pep.x,this.startY=this.ev.y=t.pep.y,this.initialPosition=this.initialPosition||this.$el.position(),this.startEvent=this.moveEvent=t,this.active=!0,this.options.shouldPreventDefault&&t.preventDefault(),this.options.allowDragEventPropagation||t.stopPropagation(),function n(){e.active&&(e.handleMove(),e.requestAnimationFrame(n))}(),function r(){e.options.easing&&(e.easing&&e.options.easing.call(e,null,e),e.requestAnimationFrame(r))}()}},n.prototype.handleMove=function(){if("undefined"!=typeof this.moveEvent){var i=this.normalizeEvent(this.moveEvent),n=e.parseInt(i.pep.x/this.options.grid[0])*this.options.grid[0],r=e.parseInt(i.pep.y/this.options.grid[1])*this.options.grid[1];this.addToLIFO({time:i.timeStamp,x:n,y:r});var s,o;if(t.inArray(i.type,this.startTriggerArray)>-1?(s=0,o=0):(s=n-this.ev.x,o=r-this.ev.y),this.dx=s,this.dy=o,this.ev.x=n,this.ev.y=r,0===s&&0===o)return void this.log({type:"event",event:"** stopped **"});var a=Math.abs(this.startX-n),h=Math.abs(this.startY-r);!this.started&&(a>this.options.startThreshold[0]||h>this.options.startThreshold[1])&&(this.started=!0,this.$el.addClass("pep-start"),this.options.start.call(this,this.startEvent,this)),this.options.droppable&&this.calculateActiveDropRegions();var l=this.options.drag.call(this,i,this);if(l===!1)return void this.resetVelocityQueue();this.log({type:"event",event:i.type}),this.log({type:"event-coords",x:this.ev.x,y:this.ev.y}),this.log({type:"velocity"}),this.doMoveTo(s,o)}},n.prototype.doMoveTo=function(t,e){var i,n,r=this.handleConstraint(t,e);"function"==typeof this.options.moveTo?(i=t>=0?"+="+Math.abs(t/this.scale)*this.options.multiplier:"-="+Math.abs(t/this.scale)*this.options.multiplier,n=e>=0?"+="+Math.abs(e/this.scale)*this.options.multiplier:"-="+Math.abs(e/this.scale)*this.options.multiplier,this.options.constrainTo&&(i=r.x!==!1?r.x:i,n=r.y!==!1?r.y:n),"x"===this.options.axis&&(n=r.y),"y"===this.options.axis&&(i=r.x),this.options.moveTo.call(this,i,n)):this.shouldUseCSSTranslation()?(t=t/this.scale*this.options.multiplier,e=e/this.scale*this.options.multiplier,this.options.constrainTo&&(t=r.x===!1?t:0,e=r.y===!1?e:0),"x"===this.options.axis&&(e=0),"y"===this.options.axis&&(t=0),this.moveToUsingTransforms(t,e)):(i=t>=0?"+="+Math.abs(t/this.scale)*this.options.multiplier:"-="+Math.abs(t/this.scale)*this.options.multiplier,n=e>=0?"+="+Math.abs(e/this.scale)*this.options.multiplier:"-="+Math.abs(e/this.scale)*this.options.multiplier,this.options.constrainTo&&(i=r.x!==!1?r.x:i,n=r.y!==!1?r.y:n),"x"===this.options.axis&&(n=r.y),"y"===this.options.axis&&(i=r.x),this.moveTo(i,n))},n.prototype.handleStop=function(e){this.active&&(this.log({type:"event",event:e.type}),this.active=!1,this.easing=!0,this.$el.removeClass("pep-start").addClass("pep-ease"),this.options.droppable&&this.calculateActiveDropRegions(),(this.started||!this.started&&t.inArray("stop",this.options.callIfNotStarted)>-1)&&this.options.stop.call(this,e,this),this.options.shouldEase?this.ease(e,this.started):this.removeActiveClass(),this.options.revert&&("stop"===this.options.revertAfter||!this.options.shouldEase)&&this.options.revertIf&&this.options.revertIf.call(this)&&this.revert(),this.started=!1,this.resetVelocityQueue())},n.prototype.ease=function(e,i){var n=(this.$el.position(),this.velocity()),r=(this.dt,n.x/this.scale*this.options.multiplier),s=n.y/this.scale*this.options.multiplier,o=this.handleConstraint(r,s,!0);this.cssAnimationsSupported()&&this.$el.css(this.getCSSEaseHash());var a=n.x>0?"+="+r:"-="+Math.abs(r),h=n.y>0?"+="+s:"-="+Math.abs(s);this.options.constrainTo&&(a=o.x!==!1?o.x:a,h=o.y!==!1?o.y:h),"x"===this.options.axis&&(h="+=0"),"y"===this.options.axis&&(a="+=0");var l=!this.cssAnimationsSupported()||this.options.forceNonCSS3Movement;"function"==typeof this.options.moveTo?this.options.moveTo.call(this,a,h):this.moveTo(a,h,l);var u=this;this.restTimeout=setTimeout(function(){u.options.droppable&&u.calculateActiveDropRegions(),u.easing=!1,(i||!i&&t.inArray("rest",u.options.callIfNotStarted)>-1)&&u.options.rest.call(u,e,u),u.options.revert&&"ease"===u.options.revertAfter&&u.options.shouldEase&&u.options.revertIf&&u.options.revertIf.call(u)&&u.revert(),u.removeActiveClass()},this.options.cssEaseDuration)},n.prototype.normalizeEvent=function(t){return t.pep={},this.isPointerEventCompatible()||!this.isTouch(t)?(t.pageX?(t.pep.x=t.pageX,t.pep.y=t.pageY):(t.pep.x=t.originalEvent.pageX,t.pep.y=t.originalEvent.pageY),t.pep.type=t.type):(t.pep.x=t.originalEvent.touches[0].pageX,t.pep.y=t.originalEvent.touches[0].pageY,t.pep.type=t.type),t},n.prototype.resetVelocityQueue=function(){this.velocityQueue=new Array(5)},n.prototype.moveTo=function(t,e,i){this.log({type:"delta",x:t,y:e}),i?this.$el.animate({top:e,left:t},0,"easeOutQuad",{queue:!1}):this.$el.stop(!0,!1).css({top:e,left:t})},n.prototype.moveToUsingTransforms=function(t,e){var i=this.matrixToArray(this.matrixString());this.cssX||(this.cssX=this.xTranslation(i)),this.cssY||(this.cssY=this.yTranslation(i)),this.cssX=this.cssX+t,this.cssY=this.cssY+e,this.log({type:"delta",x:t,y:e}),i[4]=this.cssX,i[5]=this.cssY,this.translation=this.arrayToMatrix(i),this.transform(this.translation)},n.prototype.transform=function(t){this.$el.css({"-webkit-transform":t,"-moz-transform":t,"-ms-transform":t,"-o-transform":t,transform:t})},n.prototype.xTranslation=function(t){return t=t||this.matrixToArray(this.matrixString()),parseInt(t[4],10)},n.prototype.yTranslation=function(t){return t=t||this.matrixToArray(this.matrixString()),parseInt(t[5],10)},n.prototype.matrixString=function(){var t=function(t){return!(!t||"none"===t||t.indexOf("matrix")<0)},e="matrix(1, 0, 0, 1, 0, 0)";return t(this.$el.css("-webkit-transform"))&&(e=this.$el.css("-webkit-transform")),t(this.$el.css("-moz-transform"))&&(e=this.$el.css("-moz-transform")),t(this.$el.css("-ms-transform"))&&(e=this.$el.css("-ms-transform")),t(this.$el.css("-o-transform"))&&(e=this.$el.css("-o-transform")),t(this.$el.css("transform"))&&(e=this.$el.css("transform")),e},n.prototype.matrixToArray=function(t){return t.split("(")[1].split(")")[0].split(",")},n.prototype.arrayToMatrix=function(t){return"matrix("+t.join(",")+")"},n.prototype.addToLIFO=function(t){var e=this.velocityQueue;e=e.slice(1,e.length),e.push(t),this.velocityQueue=e},n.prototype.velocity=function(){for(var t=0,e=0,i=0;i<this.velocityQueue.length-1;i++)this.velocityQueue[i]&&(t+=this.velocityQueue[i+1].x-this.velocityQueue[i].x,e+=this.velocityQueue[i+1].y-this.velocityQueue[i].y,this.dt=this.velocityQueue[i+1].time-this.velocityQueue[i].time);return{x:t*this.options.velocityMultiplier,y:e*this.options.velocityMultiplier}},n.prototype.revert=function(){this.shouldUseCSSTranslation()&&this.moveToUsingTransforms(-this.xTranslation(),-this.yTranslation()),this.moveTo(this.initialPosition.left,this.initialPosition.top)},n.prototype.requestAnimationFrame=function(t){return e.requestAnimationFrame&&e.requestAnimationFrame(t)||e.webkitRequestAnimationFrame&&e.webkitRequestAnimationFrame(t)||e.mozRequestAnimationFrame&&e.mozRequestAnimationFrame(t)||e.oRequestAnimationFrame&&e.mozRequestAnimationFrame(t)||e.msRequestAnimationFrame&&e.msRequestAnimationFrame(t)||e.setTimeout(t,1e3/60)},n.prototype.positionParent=function(){this.options.constrainTo&&!this.parentPositioned&&(this.parentPositioned=!0,"parent"===this.options.constrainTo?this.$container.css({position:"relative"}):"window"===this.options.constrainTo&&"#document"!==this.$container.get(0).nodeName&&"static"!==this.$container.css("position")&&this.$container.css({position:"static"}))},n.prototype.placeObject=function(){this.objectPlaced||(this.objectPlaced=!0,this.offset="parent"===this.options.constrainTo||this.hasNonBodyRelative()?this.$el.position():this.$el.offset(),parseInt(this.$el.css("left"),10)&&(this.offset.left=this.$el.css("left")),"number"==typeof this.options.startPos.left&&(this.offset.left=this.options.startPos.left),parseInt(this.$el.css("top"),10)&&(this.offset.top=this.$el.css("top")),"number"==typeof this.options.startPos.top&&(this.offset.top=this.options.startPos.top),this.options.removeMargins&&this.$el.css({margin:0}),this.$el.css({position:"absolute",top:this.offset.top,left:this.offset.left}))},n.prototype.hasNonBodyRelative=function(){return this.$el.parents().filter(function(){var e=t(this);return e.is("body")||"relative"===e.css("position")}).length>1},n.prototype.setScale=function(t){this.scale=t},n.prototype.setMultiplier=function(t){this.options.multiplier=t},n.prototype.removeCSSEasing=function(){this.cssAnimationsSupported()&&this.$el.css(this.getCSSEaseHash(!0))},n.prototype.disableSelect=function(){this.$el.css({"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"})},n.prototype.removeActiveClass=function(){this.$el.removeClass([this.options.activeClass,"pep-ease"].join(" "))},n.prototype.handleConstraint=function(e,n,r){var s=this.$el.position();this.pos.x=s.left,this.pos.y=s.top;var o,a,h,l,u={x:!1,y:!1};return this.log({type:"pos-coords",x:this.pos.x,y:this.pos.y}),t.isArray(this.options.constrainTo)?(this.options.constrainTo[3]!==i&&this.options.constrainTo[1]!==i&&(a=this.options.constrainTo[1]===!1?1/0:this.options.constrainTo[1],h=this.options.constrainTo[3]===!1?-1/0:this.options.constrainTo[3]),this.options.constrainTo[0]!==!1&&this.options.constrainTo[2]!==!1&&(o=this.options.constrainTo[2]===!1?1/0:this.options.constrainTo[2],l=this.options.constrainTo[0]===!1?-1/0:this.options.constrainTo[0]),this.pos.x+e<h&&(u.x=h),this.pos.y+n<l&&(u.y=l)):"string"==typeof this.options.constrainTo&&(h=0,l=0,a=this.$container.width()-this.$el.outerWidth(),o=this.$container.height()-this.$el.outerHeight(),this.pos.x+e<0&&(u.x=0),this.pos.y+n<0&&(u.y=0)),this.pos.x+e>a&&(u.x=a),this.pos.y+n>o&&(u.y=o),this.shouldUseCSSTranslation()&&r&&(u.x===h&&this.xTranslation()&&(u.x=h-this.xTranslation()),u.x===a&&this.xTranslation()&&(u.x=a-this.xTranslation()),u.y===l&&this.yTranslation()&&(u.y=l-this.yTranslation()),u.y===o&&this.yTranslation()&&(u.y=o-this.yTranslation())),u},n.prototype.getCSSEaseHash=function(t){"undefined"==typeof t&&(t=!1);var e;if(t)e="";else{if(this.CSSEaseHash)return this.CSSEaseHash;e=["all",this.options.cssEaseDuration+"ms",this.options.cssEaseString].join(" ")}return{"-webkit-transition":e,"-moz-transition":e,"-ms-transition":e,"-o-transition":e,transition:e}},n.prototype.calculateActiveDropRegions=function(){var e=this;this.activeDropRegions.length=0,t.each(t(this.options.droppable),function(i,n){var r=t(n);e.isOverlapping(r,e.$el)?(r.addClass(e.options.droppableActiveClass),e.activeDropRegions.push(r)):r.removeClass(e.options.droppableActiveClass)})},n.prototype.isOverlapping=function(t,e){if(this.options.overlapFunction)return this.options.overlapFunction(t,e);var i=t[0].getBoundingClientRect(),n=e[0].getBoundingClientRect();return!(i.right<n.left||i.left>n.right||i.bottom<n.top||i.top>n.bottom)},n.prototype.isTouch=function(t){return t.type.search("touch")>-1},n.prototype.isPointerEventCompatible=function(){return"MSPointerEvent"in e},n.prototype.applyMSDefaults=function(){this.$el.css({"-ms-touch-action":"none","touch-action":"none","-ms-scroll-chaining":"none","-ms-scroll-limit":"0 0 0 0"})},n.prototype.isValidMoveEvent=function(t){return!this.isTouch(t)||this.isTouch(t)&&t.originalEvent&&t.originalEvent.touches&&1===t.originalEvent.touches.length},n.prototype.shouldUseCSSTranslation=function(){if(this.options.forceNonCSS3Movement)return!1;if("undefined"!=typeof this.useCSSTranslation)return this.useCSSTranslation;var t=!1;return t=!this.options.useCSSTranslation||"undefined"!=typeof Modernizr&&!Modernizr.csstransforms?!1:!0,this.useCSSTranslation=t,t},n.prototype.cssAnimationsSupported=function(){if("undefined"!=typeof this.cssAnimationsSupport)return this.cssAnimationsSupport;if("undefined"!=typeof Modernizr&&Modernizr.cssanimations)return this.cssAnimationsSupport=!0,!0;var t=!1,e=document.createElement("div"),n="animation",r="",s="Webkit Moz O ms Khtml".split(" "),o="";if(e.style.animationName&&(t=!0),t===!1)for(var a=0;a<s.length;a++)if(e.style[s[a]+"AnimationName"]!==i){o=s[a],n=o+"Animation",r="-"+o.toLowerCase()+"-",t=!0;break}return this.cssAnimationsSupport=t,t},n.prototype.hardwareAccelerate=function(){this.$el.css({"-webkit-perspective":1e3,perspective:1e3,"-webkit-backface-visibility":"hidden","backface-visibility":"hidden"})},n.prototype.getMovementValues=function(){return{ev:this.ev,pos:this.pos,velocity:this.velocity()}},n.prototype.buildDebugDiv=function(){var e;0===t("#pep-debug").length&&(e=t("<div></div>"),e.attr("id","pep-debug").append("<div style='font-weight:bold; background: red; color: white;'>DEBUG MODE</div>").append("<div id='pep-debug-event'>no event</div>").append("<div id='pep-debug-ev-coords'>event coords: <span class='pep-x'>-</span>, <span class='pep-y'>-</span></div>").append("<div id='pep-debug-pos-coords'>position coords: <span class='pep-x'>-</span>, <span class='pep-y'>-</span></div>").append("<div id='pep-debug-velocity'>velocity: <span class='pep-x'>-</span>, <span class='pep-y'>-</span></div>").append("<div id='pep-debug-delta'>&Delta; movement: <span class='pep-x'>-</span>, <span class='pep-y'>-</span></div>").css({position:"fixed",bottom:5,right:5,zIndex:99999,textAlign:"right",fontFamily:"Arial, sans",fontSize:10,border:"1px solid #DDD",padding:"3px",background:"white",color:"#333"}));var i=this;setTimeout(function(){i.debugElements={$event:t("#pep-debug-event"),$velocityX:t("#pep-debug-velocity .pep-x"),$velocityY:t("#pep-debug-velocity .pep-y"),$dX:t("#pep-debug-delta .pep-x"),$dY:t("#pep-debug-delta .pep-y"),$evCoordsX:t("#pep-debug-ev-coords .pep-x"),$evCoordsY:t("#pep-debug-ev-coords .pep-y"),$posCoordsX:t("#pep-debug-pos-coords .pep-x"),$posCoordsY:t("#pep-debug-pos-coords .pep-y")}},0),t("body").append(e)},n.prototype.log=function(t){if(this.options.debug)switch(t.type){case"event":this.debugElements.$event.text(t.event);break;case"pos-coords":this.debugElements.$posCoordsX.text(t.x),this.debugElements.$posCoordsY.text(t.y);break;case"event-coords":this.debugElements.$evCoordsX.text(t.x),this.debugElements.$evCoordsY.text(t.y);break;case"delta":this.debugElements.$dX.text(t.x),this.debugElements.$dY.text(t.y);break;case"velocity":var e=this.velocity();this.debugElements.$velocityX.text(Math.round(e.x)),this.debugElements.$velocityY.text(Math.round(e.y))}},n.prototype.toggle=function(t){this.disabled="undefined"==typeof t?!this.disabled:!t},t.extend(t.easing,{easeOutQuad:function(t,e,i,n,r){return-n*(e/=r)*(e-2)+i},easeOutCirc:function(t,e,i,n,r){return n*Math.sqrt(1-(e=e/r-1)*e)+i},easeOutExpo:function(t,e,i,n,r){return e===r?i+n:n*(-Math.pow(2,-10*e/r)+1)+i}}),t.fn[r]=function(e){return this.each(function(){if(!t.data(this,"plugin_"+r)){var i=new n(this,e);t.data(this,"plugin_"+r,i),t.pep.peps.push(i)}})},t.pep={},t.pep.peps=[],t.pep.toggleAll=function(e){t.each(this.peps,function(t,i){i.toggle(e)})},t.pep.unbind=function(t){var e=t.data("plugin_"+r);"undefined"!=typeof e&&(e.toggle(!1),e.unsubscribe(),t.removeData("plugin_"+r))}}(jQuery,window);