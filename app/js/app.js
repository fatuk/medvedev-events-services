$(function(){var e={};e.Collections={},e.Models={},e.Views={},e.Views.App=Backbone.View.extend({el:".js-services",initialize:function(){}}),e.Views.Drop=Backbone.View.extend({el:".js-drop",initialize:function(){this.collection.on("add",function(){this.render()},this)},render:function(){var t=this;this.$el.find(".js-selectedItems").html(""),this.collection.each(function(t){var i=new e.Views.DropItem({model:t});this.$el.find(".js-selectedItems").append(i.$el.data("serviceName",t.get("name")))},this),$(".js-dragItem").pep({initiate:function(){},droppable:".js-drop",stop:function(e,i){var n=$(i.el),s=this.activeDropRegions.length;s&&t.saveSelectedItem(n)},revert:!0,debug:!0,place:!1})}}),e.Views.DropItem=Backbone.View.extend({template:$("#dragItemTemplate").html(),tagName:"li",className:"services__item js-dropItem",initialize:function(){this.render()},render:function(){var e=Mustache.render(this.template,this.model.toJSON());return this.$el.html(e),this.$el.addClass("services__item_"+this.model.get("icon")),this.$el.attr("id","dropItem-"+this.model.get("id")),this}}),e.Views.Drag=Backbone.View.extend({el:".js-drag",events:{"mousedown .js-dragItem":"mousedown","mouseup .js-dragItem":"mouseup","mouseout .js-dragItem":"mouseout","click .js-dragItem":"click"},initialize:function(){this.collection.on("reset",function(){this.render()},this)},mousedown:function(e){var t=$(e.currentTarget);t.addClass("click")},mouseup:function(e){var t=$(e.currentTarget);t.removeClass("click")},click:function(e){$(e.currentTarget)},saveSelectedItem:function(e){var t=e.data("id"),n=this.collection.findWhere({id:t});e.css({visibility:"hidden"}),i.push(n),$(".js-selected").html(""),i.each(function(e){$(".js-selected").append("<li>"+e.get("name")+"</li>")})},removeSelectedItem:function(){},render:function(){var t=this,i=$(".js-dragEmpty");this.$el.html(""),i.html(""),this.collection.each(function(t){var n=new e.Views.DragItem({model:t});this.$el.append(n.$el.data("serviceName",t.get("name"))),i.append('<li class="services__empty-item"></li>')},this),$(".js-dragItem").pep({initiate:function(){},droppable:".js-drop",initiate:function(){},start:function(){},drag:function(){},rest:function(){},stop:function(e,i){var n=$(i.el),s=this.activeDropRegions.length;s&&t.saveSelectedItem(n)},revert:!0,debug:!0,place:!1})}}),e.Views.DragItem=Backbone.View.extend({template:$("#dragItemTemplate").html(),tagName:"li",className:"services__item js-dragItem",initialize:function(){this.render()},render:function(){var e=Mustache.render(this.template,this.model.toJSON());return this.$el.html(e),this.$el.addClass("services__item_"+this.model.get("icon")),this.$el.attr("id","dragItem-"+this.model.get("id")),this.$el.data("id",this.model.get("id")),this}}),e.Collections.AvailableItems=Backbone.Collection.extend({url:$("#dragItemTemplate").data("url"),initialize:function(){this.fetch({reset:!0})}}),e.Collections.SelectedItems=Backbone.Collection.extend({});{var t=new e.Collections.AvailableItems,i=new e.Collections.SelectedItems;new e.Views.App,new e.Views.Drag({collection:t}),new e.Views.Drop({collection:i})}});
//# sourceMappingURL=../js/app.js.map