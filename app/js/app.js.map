{"version":3,"sources":["app.js"],"names":["$","App","Collections","Models","Views","Backbone","View","extend","el","initialize","Drag","DragItem","AvailableDrag","this","collection","on","render","saveSelectedItem","$item","css","visibility","selectedItems","push","serviceName","data","console","log","models","length","html","each","item","append","get","removeSelectedItem","self","$el","availableItem","availableDragItem","AvailableDragItem","model","pep","initiate","droppable","stop","event","object","intersected","activeDropRegions","revert","debug","place","template","tagName","className","rendered","Mustache","toJSON","AvailableItems","Collection","url","fetch","reset","SelectedItems","availableItems"],"mappings":"AAAAA,EAAA,WACA,GAAAC,KACAA,GAAAC,eACAD,EAAAE,UACAF,EAAAG,SASAH,EAAAG,MAAAH,IAAAI,SAAAC,KAAAC,QACAC,GAAA,eACAC,WAAA,eAMAR,EAAAG,MAAAM,KAAAL,SAAAC,KAAAC,QACAC,GAAA,eACAC,WAAA,eAKAR,EAAAG,MAAAO,SAAAN,SAAAC,KAAAC,QACAC,GAAA,eACAC,WAAA,eAMAR,EAAAG,MAAAQ,cAAAP,SAAAC,KAAAC,QACAC,GAAA,wBACAC,WAAA,WACAI,KAAAC,WAAAC,GAAA,QAAA,WACAF,KAAAG,UACAH,OAEAI,iBAAA,SAAAC,GACAA,EAAAC,KACAC,WAAA,WAEAC,EAAAC,MACAC,YAAAL,EAAAM,KAAA,iBAEAC,QAAAC,IAAAL,EAAAM,OAAAC,QACA5B,EAAA,gBAAA6B,KAAA,IACAR,EAAAS,KAAA,SAAAC,GACA/B,EAAA,gBAAAgC,OAAA,OAAAD,EAAAE,IAAA,eAAA,YAGAC,mBAAA,aAGAlB,OAAA,WACA,GAAAmB,GAAAtB,IAEAA,MAAAuB,IAAAP,KAAA,IACAhB,KAAAC,WAAAgB,KAAA,SAAAO,GACA,GAAAC,GAAA,GAAArC,GAAAG,MAAAmC,mBACAC,MAAAH,GAEAxB,MAAAuB,IAAAJ,OAAAM,EAAAF,IAAAZ,KAAA,cAAAa,EAAAJ,IAAA,WACApB,MAGAb,EAAA,gBAAAyC,KACAC,SAAA,aAMAC,UAAA,eACAC,KAAA,SAAAC,EAAAC,GACA,GAAA5B,GAAAlB,EAAA8C,EAAAtC,IACAuC,EAAAlC,KAAAmC,kBAAApB,MAGAmB,IACAZ,EAAAlB,iBAAAC,IAGA+B,QAAA,EACAC,OAAA,EACAC,OAAA,OAKAlD,EAAAG,MAAAmC,kBAAAlC,SAAAC,KAAAC,QACA6C,SAAApD,EAAA,8BAAA6B,OACAwB,QAAA,KACAC,UAAA,uCACA7C,WAAA,WACAI,KAAAG,UAEAA,OAAA,WACA,GAAAuC,GAAAC,SAAAxC,OAAAH,KAAAuC,SAAAvC,KAAA2B,MAAAiB,SAEA,OADA5C,MAAAuB,IAAAP,KAAA0B,GACA1C,QAYAZ,EAAAC,YAAAwD,eAAArD,SAAAsD,WAAApD,QACAqD,IAAA5D,EAAA,8BAAAwB,KAAA,OACAf,WAAA,WACAI,KAAAgD,OACAC,OAAA,OAKA7D,EAAAC,YAAA6D,cAAA1D,SAAAsD,WAAApD,UAQA,EAAA,GAAAyD,GAAA,GAAA/D,GAAAC,YAAAwD,eACArC,EAAA,GAAApB,GAAAC,YAAA6D,aAEA,IAAA9D,GAAAG,MAAAH,IACA,GAAAA,GAAAG,MAAAQ,eACAE,WAAAkD","file":"app.js","sourcesContent":["$(function () {\n\tvar App = {};\n\tApp.Collections = {};\n\tApp.Models = {};\n\tApp.Views = {};\n\n\t/*****************\n\t *\n\t *  Views\n\t *\n\t ******************/\n\n\t// Main view\n\tApp.Views.App = Backbone.View.extend({\n\t\tel: '.js-services',\n\t\tinitialize: function () {\n\n\t\t}\n\t});\n\n\t// Drag view\n\tApp.Views.Drag = Backbone.View.extend({\n\t\tel: '.js-dragArea',\n\t\tinitialize: function () {\n\n\t\t}\n\t});\n\t// Drag item view\n\tApp.Views.DragItem = Backbone.View.extend({\n\t\tel: '.js-dragArea',\n\t\tinitialize: function () {\n\n\t\t}\n\t});\n\n\t// Available drag view\n\tApp.Views.AvailableDrag = Backbone.View.extend({\n\t\tel: '.js-availableDragArea',\n\t\tinitialize: function () {\n\t\t\tthis.collection.on('reset', function () {\n\t\t\t\tthis.render();\n\t\t\t}, this);\n\t\t},\n\t\tsaveSelectedItem: function ($item) {\n\t\t\t$item.css({\n\t\t\t\tvisibility: 'hidden'\n\t\t\t});\n\t\t\tselectedItems.push({\n\t\t\t\tserviceName: $item.data('serviceName')\n\t\t\t});\n\t\t\tconsole.log(selectedItems.models.length);\n\t\t\t$('.js-selected').html('');\n\t\t\tselectedItems.each(function (item) {\n\t\t\t\t$('.js-selected').append('<li>' + item.get('serviceName') + '</li>');\n\t\t\t});\n\t\t},\n\t\tremoveSelectedItem: function () {\n\n\t\t},\n\t\trender: function () {\n\t\t\tvar self = this;\n\n\t\t\tthis.$el.html('');\n\t\t\tthis.collection.each(function (availableItem, index) {\n\t\t\t\tvar availableDragItem = new App.Views.AvailableDragItem({\n\t\t\t\t\tmodel: availableItem\n\t\t\t\t});\n\t\t\t\tthis.$el.append(availableDragItem.$el.data('serviceName', availableItem.get('name')));\n\t\t\t}, this);\n\n\t\t\t// Drag init\n\t\t\t$('.js-dragItem').pep({\n\t\t\t\tinitiate: function () {\n\t\t\t\t\t// console.log('initiate');\n\t\t\t\t},\n\t\t\t\t/*start: function () {\n\t\t\t\t\tconsole.log(this);\n\t\t\t\t},*/\n\t\t\t\tdroppable: '.js-dragArea',\n\t\t\t\tstop: function (event, object) {\n\t\t\t\t\tvar $item = $(object.el),\n\t\t\t\t\t\tintersected = this.activeDropRegions.length;\n\n\n\t\t\t\t\tif (intersected) {\n\t\t\t\t\t\tself.saveSelectedItem($item);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trevert: true,\n\t\t\t\tdebug: true,\n\t\t\t\tplace: false\n\t\t\t});\n\t\t}\n\t});\n\t// Available drag item view\n\tApp.Views.AvailableDragItem = Backbone.View.extend({\n\t\ttemplate: $('#availableDragItemTemplate').html(),\n\t\ttagName: 'li',\n\t\tclassName: 'services__available-item js-dragItem',\n\t\tinitialize: function () {\n\t\t\tthis.render();\n\t\t},\n\t\trender: function () {\n\t\t\tvar rendered = Mustache.render(this.template, this.model.toJSON());\n\t\t\tthis.$el.html(rendered);\n\t\t\treturn this;\n\t\t}\n\t});\n\n\n\t/*****************\n\t *\n\t *  Collections\n\t *\n\t ******************/\n\n\t// Available items\n\tApp.Collections.AvailableItems = Backbone.Collection.extend({\n\t\turl: $('#availableDragItemTemplate').data('url'),\n\t\tinitialize: function () {\n\t\t\tthis.fetch({\n\t\t\t\treset: true\n\t\t\t});\n\t\t}\n\t});\n\t// Selected items\n\tApp.Collections.SelectedItems = Backbone.Collection.extend({});\n\n\n\t/*****************\n\t *\n\t *  Initialize\n\t *\n\t ******************/\n\tvar availableItems = new App.Collections.AvailableItems(),\n\t\tselectedItems = new App.Collections.SelectedItems();\n\n\tvar appView = new App.Views.App(),\n\t\tavailableItemsView = new App.Views.AvailableDrag({\n\t\t\tcollection: availableItems\n\t\t});\n});\n"],"sourceRoot":"/source/"}